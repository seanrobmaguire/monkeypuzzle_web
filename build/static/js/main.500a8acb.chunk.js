(window.webpackJsonpmonkeypuzzle=window.webpackJsonpmonkeypuzzle||[]).push([[0],{36:function(e,t,a){e.exports=a(76)},41:function(e,t,a){},47:function(e,t,a){},48:function(e,t,a){},55:function(e,t,a){},56:function(e,t,a){},73:function(e,t,a){},74:function(e,t,a){},76:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),l=a(13),s=a.n(l),i=(a(41),a(7)),r=a(16),c=a(2),d=a(3),u=a(5),m=a(4),h=a(1),p=a(6),g=a(30),f=a.n(g),b=a(8),y=a.n(b),v=a(31),E=a.n(v),k=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={buttons:2},a}return Object(p.a)(t,e),Object(d.a)(t,[{key:"renderButtons",value:function(){return 2===this.props.content.footer.buttonNo?o.a.createElement("div",{className:"modal-footer"},o.a.createElement("button",{ref:this.props.buttonRef,"aria-label":"Close Modal","aria-labelledby":"close-modal",onClick:this.props.closeModal,type:"button",className:this.props.content.footer.button1.className},this.props.content.footer.button1.value),o.a.createElement("button",{type:"button",className:this.props.content.footer.button2.className,"data-dismiss":"modal",onClick:this.props.onClick},this.props.content.footer.button2.value)):o.a.createElement("div",{className:"modal-footer"},o.a.createElement("button",{ref:this.props.buttonRef,"aria-label":"Close Modal","aria-labelledby":"close-modal",onClick:this.props.closeModal,type:"button",className:this.props.content.footer.button1.class},this.props.content.footer.button1.value))}},{key:"render",value:function(){return s.a.createPortal(o.a.createElement(E.a,null,o.a.createElement("aside",{tag:"aside",role:"dialog",tabIndex:"-1","aria-modal":"true",className:"modal-cover",onClick:this.props.onClickOutside,onKeyDown:this.props.onKeyDown,id:this.props.id},o.a.createElement("div",{className:"modal-dialog modal-lg"},o.a.createElement("div",{className:"modal-content",ref:this.props.modalRef},o.a.createElement("div",{className:"modal-header"},o.a.createElement("h4",{className:"modal-title"},this.props.content.title),o.a.createElement("button",{ref:this.props.buttonRef,"aria-label":"Close Modal","aria-labelledby":"close-modal",className:"close",onClick:this.props.closeModal,type:"button"},"\xd7")),this.props.content.content,this.renderButtons())))),document.body)}}]),t}(n.Component),S=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props.style,t=void 0===e?{display:"block"}:e;return o.a.createElement("button",{id:this.props.id,ref:this.props.buttonRef,onClick:this.props.showModal,className:this.props.className,style:{display:t},title:this.props.title},this.props.triggerText)}}]),t}(n.Component),_=(a(47),function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(u.a)(this,Object(m.a)(t).call(this))).showModal=function(){e.setState({isShown:!0},(function(){e.closeButton.focus()})),e.toggleScrollLock()},e.closeModal=function(){e.setState({isShown:!1}),e.TriggerButton.focus(),e.toggleScrollLock()},e.onKeyDown=function(t){27===t.keyCode&&e.closeModal()},e.onClickOutside=function(t){e.modal&&e.modal.contains(t.target)||e.closeModal()},e.toggleScrollLock=function(){document.querySelector("html").classList.toggle("scroll-lock")},e.actionAndClose=function(){e.props.onClick(),e.closeModal()},e.state={isShown:!1},e}return Object(p.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this;return o.a.createElement(o.a.Fragment,null,o.a.createElement(S,{showModal:this.showModal,buttonRef:function(t){return e.TriggerButton=t},triggerText:this.props.modalProps.trigger.triggerText,className:this.props.modalProps.trigger.className,id:this.props.modalProps.trigger.triggerId,style:this.props.show,title:this.props.modalProps.trigger.title}),this.state.isShown?o.a.createElement("div",null,o.a.createElement(k,{id:this.props.modalProps.id,modalRef:function(t){return e.modal=t},buttonRef:function(t){return e.closeButton=t},closeModal:this.closeModal,modalTitle:this.props.modalProps.modalTitle,content:this.props.modalProps,onKeyDown:this.onKeyDown,onClickOutside:this.onClickOutside,onClick:this.actionAndClose})):o.a.createElement(o.a.Fragment,null))}}]),t}(n.Component)),N={resources:[],nodes:[],edges:[]},w="data";function O(e,t){if(e&&t){if(null!==M(e)&&null!==M(t)){var a=function(e,t){if(e&&t){return{id:z(),source_id:e,target_id:t}}}(e,t);return N.edges.push(a),a}throw"Could not create new edge between: "+e+" & "+t}}function C(e){if(e){var t=function(e){if(e){return{id:z(),type:"atom",text:e,sources:[],metadata:{}}}}(e);return N.nodes.push(t),t}}function x(e){if(e){var t=function(e){if(e){return{id:z(),content:e,type:"text",metadata:{}}}}(e);return N.resources.push(t),t}}function T(e){if(e){var t=function(e){if(e){return{id:z(),type:"scheme",name:e}}}(e);return N.nodes.push(t),t}}function j(e,t,a,n,o){if(e&&t&&null!==a&&null!==n&&null!==o&&void 0!==a&&void 0!==n&&void 0!==o){var l=function(e,t,a,n){if(e&&null!==t&&void 0!==t&&null!==a&&void 0!==a&&null!==n&&void 0!==n){return{resource_id:e,text:t,offset:a,length:n}}}(t,a,n,o);return N.nodes.forEach((function(t){"atom"===t.type&&e===t.id&&t.sources.push(l)})),l}}function A(e){if(e)for(var t=function(e){if(e)for(var t,a=Object.keys(N.edges).length,n=0;n<a;++n)if((t=N.edges[n]).id===e)return t}(e),a=Object.keys(N.edges).length,n=0;n<a;++n)if(N.edges[n].id===t.id)return delete N.edges[n],void(N.edges=G(N.edges))}function D(e,t){if(e&&t)for(var a=function(e,t){if(e&&t)for(var a,n=[],o=R(e),l=Object.keys(o.sources).length,s=0;s<l;++s)if((a=o.sources[s]).resource_id===t)return n[0]=o,n[1]=a,n}(e,t),n=Object.keys(N.nodes).length,o=0;o<n;++o)if(N.nodes[o].atom.sources.resource_id===a.id)return delete N.nodes[o].atom_id.sources.resource_id,void(N.nodes[o].atom_id.sources=G(N.nodes))}function F(e){null!==e&&void 0!==e||(console.log(e,"sadface null"),e=N);var t={nodes:[],edges:[]};return e.edges.forEach((function(e){var a={data:{}};a.data.id=e.id,a.data.source=e.source_id,a.data.target=e.target_id,t.edges.push(a)})),e.nodes.forEach((function(e){})),e.nodes.forEach((function(e){if(null!==e){var a={data:{}};a.data.id=e.id,a.data.type=e.type,"atom"===a.data.type?(a.classes="atom-label",a.data.typeshape="roundrectangle",a.data.content=e.text):(a.classes="scheme-label",a.data.typeshape="diamond",a.data.content=e.name),t.nodes.push(a)}})),JSON.stringify(t)}function R(e){if(console.log(e),e)for(var t,a=Object.keys(N.nodes).length,n=0;n<a;++n)if((t=N.nodes[n]).id===e)return t}function M(e){if(e)for(var t,a=Object.keys(N.nodes).length,n=0;n<a;++n)if((t=N.nodes[n]).id===e)return t}function P(e){if(e)for(var t,a=Object.keys(N.resources).length,n=0;n<a;++n)if((t=N.resources[n]).id===e)return t}function J(e){if(e)for(var t,a=Object.keys(N.nodes).length,n=0;n<a;++n)if((t=N.nodes[n]).id===e)return t}function V(e){if(e)return N=JSON.parse(e)}function z(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(function(e){return(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)}))}function I(){return(new Date).toISOString().split(".")[0]}function L(e,t){var a,n=e;null!==n&&void 0!==n||(n=w),"dot"===t?(n+=".dot",N.nodes.forEach((function(e){if(e.indexof("text")){var t=e.text;t.length>25&&(t="\r\n".join(function(e,t){if(e&&t){for(var a=function(e){var t=0;if(0!==e.length)for(var a=0;a<e.length;a++)t+=e[a].length;return t},n=[[]],o=e.split(" "),l=0;l<o.length;l++){var s=o[l];a(n[n.length-1])+s.length>t&&(n=n.concat([[]])),n[n.length-1]=n[n.length-1].concat(s)}for(l=0;l<n.length;l++)n[l]=n[l].join(" ");return n}}(t,25))),'"{}"'.format(e.id)+'[label="'+t+'"] [shape=box, style=diamond];\n'}else e.indexof("name")&&'"{}"'.format(e.id)+' [label="'+e.name+'"] [shape=diamond];\n'})),a=void N.edges.forEach((function(e){var t=M(e.source_id),a=M(e.target_id);"atom"===t.type?'"{}"'.format(t.id):"scheme"===t.type&&'"{}"'.format(t.id),"atom"===a.type?'"{}"'.format(a.id):"scheme"===a.type&&'"{}"'.format(a.id)}))):"cytoscape"===t?(n+=".json",a=function(e){var t;return t=null!==e||void 0!==e?N:e,JSON.stringify(t,null,2)}(JSON.parse(F(null)))):(n+=".json",a=JSON.stringify(N,null,2)),U(n,a)}function U(e,t){console.log("Downloading "+e);var a=document.createElement("a");a.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(t)),a.setAttribute("download",e),a.style.display="none",document.body.appendChild(a),a.click(),document.body.removeChild(a)}function B(e,t,a){if(e&&(t||a)){var n=P(e);if(null===n||void 0===n)throw"Could not update the resource: "+e;null!==t&&void 0!==t&&(n.content=t),null!==a&&void 0!==a&&(n.metadata.title=a),N.resources.forEach((function(t){t.id===e&&(t=n)}))}}function H(){return N}var G=function(e){if(e){var t=[];return Object.keys(e).forEach((function(a){e[a]&&t.push(e[a])})),t}return e};a(48);var W=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={},a.pngRef=o.a.createRef(),a.jpgRef=o.a.createRef(),a.loadJSONRef=o.a.createRef(),a.mp_reset=a.mp_reset.bind(Object(h.a)(a)),a.download_png=a.download_png.bind(Object(h.a)(a)),a.download_jpg=a.download_jpg.bind(Object(h.a)(a)),a.download_sadface=a.download_sadface.bind(Object(h.a)(a)),a.handleFileName=a.handleFileName.bind(Object(h.a)(a)),a.handleSADfaceUpload=a.handleSADfaceUpload.bind(Object(h.a)(a)),a.SADfaceUpload=a.SADfaceUpload.bind(Object(h.a)(a)),a}return Object(p.a)(t,e),Object(d.a)(t,[{key:"mp_reset",value:function(){console.log("reset"),localStorage.clear(),window.location.reload(!1)}},{key:"handle_set_analyst_name",value:function(e){var t,a=e.target.value;(t=a)&&(N.analyst_name=t)}},{key:"handle_set_analyst_email",value:function(e){var t,a=e.target.value;(t=a)&&(N.analyst_email=t)}},{key:"download_png",value:function(){var e=this.props.fileName;0===e.length&&(e="default"),e+=".png",this.pngRef.current.download=e}},{key:"download_jpg",value:function(){var e=this.props.fileName;0===e.length&&(e="default"),e+=".jpg",this.jpgRef.current.download=e}},{key:"download_sadface",value:function(){this.props.fileManager("save","json",null)}},{key:"handleFileName",value:function(e){var t=e.target.value;this.props.setFileName(t)}},{key:"handleSADfaceUpload",value:function(){this.loadJSONRef.current.click()}},{key:"SADfaceUpload",value:function(){var e=this.loadJSONRef.current.files;this.props.fileManager("load","json",null,e)}},{key:"render",value:function(){var e={trigger:{triggerText:"Reset",title:"Reset MonkeyPuzzle to her initial state",id:"clear_storage_button",className:"btn btn-danger"},title:"Reset MonkeyPuzzle",id:"confirm_reset_modal",content:o.a.createElement("div",{className:"modal-body"},o.a.createElement("p",null,"Are you sure that you want to reset MonkeyPuzzle?",o.a.createElement("br",null)," This will empty the current analysis and adjust all options back to their initial settings.")),footer:{buttonNo:2,button1:{className:"btn btn-secondary",value:"Cancel"},button2:{className:"btn btn-danger",value:"Reset"}}};return o.a.createElement("nav",{id:"menu",className:"menu"},o.a.createElement("a",{href:"http://arg.napier.ac.uk/monkeypuzzle/",target:"_blank",rel:"noopener noreferrer"},o.a.createElement("header",{className:"menu-header"},o.a.createElement("span",{className:"menu-header-title"},"MonkeyPuzzle"))),o.a.createElement("section",{className:"menu-section"},o.a.createElement("h3",{className:"menu-section-title"},"Interface"),o.a.createElement("ul",{className:"menu-section-list"},o.a.createElement("li",null,o.a.createElement(y.a,{id:"toggle_resources",className:"btn btn-default",variant:"light",title:"Toggle the visibility of the resources pane",children:"Toggle Resource Pane",onClick:this.props.toggleResourcePane})),o.a.createElement("li",null,o.a.createElement(_,{modalProps:e,onClick:this.mp_reset})),o.a.createElement("li",null,o.a.createElement(y.a,{id:"load_demo_argument_button",className:"btn btn-default",variant:"light",title:"Load a demonstration SADFace document into MonkeyPuzzle",children:"Load Demo",onClick:this.props.load_demo_argument})),o.a.createElement("li",null,o.a.createElement("textarea",{id:"analyst_name_textarea",type:"text",rows:"1",cols:"20",maxLength:"40",style:{resize:"none"},className:"form-control",placeholder:"Name",title:"Type your name here...",onChange:this.handle_set_analyst_name})),o.a.createElement("li",null,o.a.createElement("textarea",{id:"analyst_email_textarea",type:"text",rows:"1",cols:"20",maxLength:"40",style:{resize:"none"},className:"form-control",placeholder:"Email",title:"Type your email address here...",onChange:this.handle_set_analyst_email})))),o.a.createElement("section",{className:"menu-section"},o.a.createElement("h3",{className:"menu-section-title"},"Export"),o.a.createElement("ul",{className:"menu-section-list"},o.a.createElement("li",null,o.a.createElement("textarea",{id:"export_filename",type:"text",rows:"1",cols:"20",maxLength:"20",style:{resize:"none"},className:"form-control",placeholder:"Filename",title:"The name for the exported file",onChange:this.handleFileName})),o.a.createElement("li",null,o.a.createElement(y.a,{id:"export_button",className:"btn btn-default",onClick:this.download_sadface,title:"Export the current analysis to a SADFace formatted JSON document",variant:"light"},"SADFace")),o.a.createElement("li",null,o.a.createElement("a",{href:this.props.png,target:"blank",id:"download_png",ref:this.pngRef},o.a.createElement(y.a,{className:"btn btn-default",title:"Export the current analysis to a PNG image",onClick:this.download_png,variant:"light"},"PNG"))),o.a.createElement("li",null,o.a.createElement("a",{href:this.props.jpg,target:"blank",id:"download_jpg",ref:this.jpgRef},o.a.createElement(y.a,{id:"download_jpg",className:"btn btn-default",title:"Export the current analysis to a JPG image",onClick:this.download_jpg,variant:"light"},"JPG"))))),o.a.createElement("section",{className:"menu-section"},o.a.createElement("h3",{className:"menu-section-title"},"Import"),o.a.createElement("ul",{className:"menu-section-list"},o.a.createElement("span",{className:"upload-span"},o.a.createElement("a",{rel:"ignore"},o.a.createElement("div",{style:{display:"inline-block"}},o.a.createElement("input",{id:"loadJSON",style:{display:"none"},accept:".json",role:"button",tabIndex:"-1000",type:"file",className:"upload-button",onChange:this.SADfaceUpload,ref:this.loadJSONRef}),o.a.createElement(y.a,{className:"btn btn-default",onClick:this.handleSADfaceUpload,title:"Load a SADFace formatted JSON document into MonkeyPuzzle",variant:"light"},"SADFace")))))),o.a.createElement("section",{className:"menu-section"},o.a.createElement("h3",{className:"menu-section-title"},"Documentation"),o.a.createElement("ul",{className:"menu-section-list"},o.a.createElement("li",null,o.a.createElement("a",{href:"http://arg.napier.ac.uk/page/project/monkeypuzzle/",id:"a"},"About MonkeyPuzzle")),o.a.createElement("li",null,o.a.createElement("a",{href:"http://arg.napier.ac.uk/page/project/monkeypuzzle/quickstart/",id:"a"},"Quick-start")),o.a.createElement("li",null,o.a.createElement("a",{href:"https://github.com/ARG-ENU/monkeypuzzle_web",id:"a"},"Code Repository")),o.a.createElement("li",null,o.a.createElement("a",{href:"https://github.com/ARG-ENU/monkeypuzzle_web/issues",id:"a"},"Issue Tracker")),o.a.createElement("li",null,o.a.createElement("a",{href:"https://github.com/ARG-ENU/monkeypuzzle_web/blob/master/LICENSE",id:"a"},"Licensing")))))}}]),t}(n.Component),K=a(9),q=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props,t=e.onClick,a=e.className;return o.a.createElement("button",{className:a,onClick:t,type:"button"},o.a.createElement(K.a,{style:{color:"#cbc5c1"}}))}}]),t}(n.Component),Y=(a(55),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={readOnly:!0},a.toggle_edit_lock=a.toggle_edit_lock.bind(Object(h.a)(a)),a.handleGetSelectedText=a.handleGetSelectedText.bind(Object(h.a)(a)),a.handleFocus=a.handleFocus.bind(Object(h.a)(a)),a}return Object(p.a)(t,e),Object(d.a)(t,[{key:"toggle_edit_lock",value:function(){this.setState({readOnly:!this.state.readOnly},(function(){return console.log("content area locked")}))}},{key:"handleGetSelectedText",value:function(){if(window.getSelection().toString().length>=1){var e=window.getSelection().toString();this.props.setSelectedText(e)}else console.log("noSelect"),this.props.setSelectedText("")}},{key:"handleFocus",value:function(e){this.props.setFocus(e.target.id)}},{key:"render",value:function(){var e=this.props,t=e.id,a=e.handleremove,n=e.handleFileDownload,l=e.style,s=e.clickLoad,i=e.contentValue,r=e.titleValue,c=e.loadTxtRef,d=e.titleRef,u=e.handleFileUpload,m=e.handleChange_title,h=e.handleChangeContent,p=e.handleAddAtomFromText;return o.a.createElement("div",{id:t+"_body",className:"resource_pane_tab_content",style:l},o.a.createElement("form",null,o.a.createElement("div",{className:"form-group"},o.a.createElement(y.a,{type:"button",className:"btn btn-default",title:"Remove this tab from the resource pane",onClick:a,variant:"light"},o.a.createElement(K.g,null)),o.a.createElement("input",{type:"file",id:"load"+t,style:{display:"none"},accept:".txt",ref:c,onChange:u}),o.a.createElement(y.a,{type:"button",id:"load"+t+"_btn",className:"btn btn-default",onClick:s,title:"Load a text file into this resource tab",variant:"light"},o.a.createElement(K.h,null)),o.a.createElement(y.a,{type:"button",className:"btn btn-default",onClick:n,title:"Save this resource tab to a text file",variant:"light"},o.a.createElement(K.b,null)),o.a.createElement(y.a,{id:"toggle_edit_lock_button "+t,type:"button",className:"btn btn-default",title:"Toggle editability of the content area",onClick:this.toggle_edit_lock,variant:"light"},this.state.readOnly?o.a.createElement(K.c,null):o.a.createElement(K.d,null)),o.a.createElement(y.a,{type:"button",className:"btn btn-default",title:"Add node from text selection",onClick:p,variant:"light",disabled:!(this.props.selectedText.length>=1)},o.a.createElement(K.f,null))),o.a.createElement("div",{className:"form-group"},o.a.createElement("label",null,"Title"),o.a.createElement("textarea",{id:"title_"+t,type:"text",rows:"1",style:{resize:"none"},className:"form-control",placeholder:"The name of this resource...",onChange:m,ref:d,value:r}),o.a.createElement("label",null,"Content"),o.a.createElement("div",{id:"textarea"},o.a.createElement("textarea",{id:t,className:"form-control",placeholder:"Enter your source text here...",rows:"20",ref:this.setTextInputRef,onChange:h,style:{resize:"vertical",minHeight:"35px"},readOnly:this.state.readOnly,value:i,onMouseUp:this.handleGetSelectedText,onFocus:this.handleFocus})))))}}]),t}(n.Component)),$=(a(56),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={resourceType:"text",current_tab:null,tabs:[]},a.addTab=a.addTab.bind(Object(h.a)(a)),a.setType=a.setType.bind(Object(h.a)(a)),a.addTabToArray=a.addTabToArray.bind(Object(h.a)(a)),a.setActiveTab=a.setActiveTab.bind(Object(h.a)(a)),a.remove_tab=a.remove_tab.bind(Object(h.a)(a)),a.updateTab=a.updateTab.bind(Object(h.a)(a)),a.loadTabs=a.loadTabs.bind(Object(h.a)(a)),a}return Object(p.a)(t,e),Object(d.a)(t,[{key:"addTab",value:function(){var e,t,a,n={};n=x(" "),e=n.id,t="title",a="",e&&t&&a&&N.resources.forEach((function(n){n.id===e&&(n.metadata[t]=a)})),n.metadata={title:""},localStorage.setItem("state",JSON.stringify(H())),n.type=this.state.resourceType,this.addTabToArray(n)}},{key:"setType",value:function(e){var t=this;this.setState({resourceType:e.target.value.toLowerCase()},(function(){return console.log(t.state.resourceType,"type set")}))}},{key:"addTabToArray",value:function(e){var t=this;this.setState({tabs:[].concat(Object(r.a)(this.state.tabs),[e])},(function(){return console.log(t.state.tabs,"add to arry")})),this.setActiveTab(e.id)}},{key:"setActiveTab",value:function(e){console.log("setActiveTabs"),this.setState({current_tab:e},(function(){console.log(this.state.current_tab,"active")}))}},{key:"remove_tab",value:function(e,t){var a,n=this;!function(e){if(e){var t=P(e);if(null!==t&&void 0!==t)for(var a=Object.keys(N.resources).length,n=0;n<a;++n)if(N.resources[n].id===t.id)return delete N.resources[n],void(N.resources=G(N.resources))}}(t),a=t,N.nodes.forEach((function(e){"atom"==e.type&&a in e.sources&&D(e.id,a)})),localStorage.setItem("state",JSON.stringify(H())),this.state.tabs.length>=1&&-1!==e&&this.setState((function(t){return{tabs:t.tabs.filter((function(t,a){return e!==a}))}}),(function(){n.state.tabs.length>=1&&n.setActiveTab(n.state.tabs[n.state.tabs.length-1].id)}))}},{key:"updateTab",value:function(e,t,a){var n=this.state.tabs.slice();n.forEach((function(n){n.id===e&&(null!==t&&(n.metadata.title=t,B(e,null,t)),null!==a&&(n.content=a,B(e,a,null)))})),this.setState({tabs:n},(function(){return console.log("Tabs updated")})),this.props.updateLocalStorage()}},{key:"loadTabs",value:function(e){var t=this;e.length>0&&(console.log("loadTabs",e),this.setState({tabs:e},(function(){console.log(t.state.tabs,"TABS"),t.setActiveTab(t.state.tabs[t.state.tabs.length-1].id)})))}},{key:"componentDidUpdate",value:function(e,t){e.newResource!==this.props.newResource&&(this.updateTab(this.props.newResource.tab,null,this.props.newResource.content),this.updateTab(this.props.newResource.tab,this.props.newResource.filename,null)),e.resourcesFromJson!==this.props.resourcesFromJson&&this.loadTabs(this.props.resourcesFromJson)}},{key:"render",value:function(){var e=this,t=0,a={trigger:{triggerText:o.a.createElement(K.e,{size:32,color:"#cbc5c1"}),className:"add_tab_button",triggerId:"add_tab_button"},id:"resource_pane_selection_modal",title:"New Resource Pane",content:o.a.createElement("div",{className:"modal-body"},o.a.createElement("p",null,"Select a resource type"),o.a.createElement("select",{className:"form-control",id:"resource_type",onChange:this.setType},o.a.createElement("option",null,"Text"))),footer:{buttonNo:2,button1:{className:"btn btn-secondary",value:"Close"},button2:{className:"btn btn-primary",value:"Add"}}};return o.a.createElement("div",{className:"resource-pane",id:"resource-pane",style:{display:this.props.showResourcePane?"block":"none"}},o.a.createElement("div",{className:"resource_pane_tab_head",id:"resource_pane_tab_head"},o.a.createElement(_,{modalProps:a,onClick:this.addTab}),this.state.tabs.map((function(a,n){return o.a.createElement("button",{key:a.id+"_btn",onClick:function(){return e.setActiveTab(a.id)},className:e.state.current_tab===a.id?"tablinks active":"tablinks",id:a.id+"_btn"},++t)}))),o.a.createElement("div",{className:"tab_body",id:"tab_body"},this.state.tabs.map((function(t,a){if("text"===t.type){e.loadTxtRef=o.a.createRef();return o.a.createElement(Y,{id:t.id,key:t.id+"_bdy",i:a,style:{display:e.state.current_tab===t.id?"block":"none"},handleremove:function(){return e.remove_tab(a,t.id)},handleFileUpload:function(a){e.props.fileManager("load","txt",t.id,a.target.files)},handleFileDownload:function(){e.props.fileManager("save","txt",t)},clickLoad:function(){e.loadTxtRef.current.click()},handleAddAtomFromText:function(t){e.props.addAtomFromText()},selectedText:e.props.selectedText,titleValue:t.metadata.title,contentValue:t.content,handleChange_title:function(a){var n=a.target.value;e.updateTab(t.id,n,null)},handleChangeContent:function(a){var n=a.target.value;e.updateTab(t.id,null,n)},loadTxtRef:e.loadTxtRef,setSelectedText:e.props.setSelectedText,setFocus:e.props.setFocus})}}))))}}]),t}(n.Component)),Z=a(14),Q=a.n(Z),X=a(32),ee=a.n(X),te=a(33),ae=a.n(te),ne=a(34),oe=a.n(ne),le=a(35),se=a.n(le);a(72),a(73);Q.a.use(ee.a),Q.a.use(se.a,oe.a),Q.a.use(ae.a);var ie=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).newAtomRef=o.a.createRef(),a.newSchemeRef=o.a.createRef(),a.editContentRef=o.a.createRef(),a.state={modalValue:" ",dropDownValue:" "},a.cy=null,a.default_sadface_doc='{"analyst_email":"'+a.analyst_email+'","analyst_name":"'+a.analyst_email+'","created":"'+a.created_date+'","edges":[],"edited":"'+a.edited_date+'","id":"'+a.document_id+'","metadata":{},"nodes":[],"resources": []}',a.analyst_email="Default Analyst Email",a.analyst_name="Default Analsyst Name",a.position=null,a.edit_atom=null,a.selected=[],a.redo_stack=[],a.undo_stack=[],a.running=!1,a.initialise_monkeypuzzle=a.initialise_monkeypuzzle.bind(Object(h.a)(a)),a.initCytoscape=a.initCytoscape.bind(Object(h.a)(a)),a.setModalValue=a.setModalValue.bind(Object(h.a)(a)),a.handleModalValueChange=a.handleModalValueChange.bind(Object(h.a)(a)),a.setDropDownValue=a.setDropDownValue.bind(Object(h.a)(a)),a.handledropDownValue=a.handledropDownValue.bind(Object(h.a)(a)),a.addScheme=a.addScheme.bind(Object(h.a)(a)),a.editScheme=a.editScheme.bind(Object(h.a)(a)),a.addAtom=a.addAtom.bind(Object(h.a)(a)),a.editAtomContent=a.editAtomContent.bind(Object(h.a)(a)),a.editAtomMetadata=a.editAtomMetadata.bind(Object(h.a)(a)),a.deleteAtom=a.deleteAtom.bind(Object(h.a)(a)),a.deleteNodes=a.deleteNodes.bind(Object(h.a)(a)),a.merge_nodes=a.merge_nodes.bind(Object(h.a)(a)),a.undo=a.undo.bind(Object(h.a)(a)),a.redrawVisualisation=a.redrawVisualisation.bind(Object(h.a)(a)),a.dragoverHandler=a.dragoverHandler.bind(Object(h.a)(a)),a.dropHandler=a.dropHandler.bind(Object(h.a)(a)),a}return Object(p.a)(t,e),Object(d.a)(t,[{key:"initialise_monkeypuzzle",value:function(){"undefined"!==localStorage.getItem("state")?this.initCytoscape():(this.props.setCurrentSadFaceDoc(this.default_sadface_doc),this.props.setCyData(F(V(this.props.current_sadface_doc))),this.initCytoscape())}},{key:"initCytoscape",value:function(){var e=this;this.cy=Q()({container:document.getElementById("cy"),elements:JSON.parse(this.props.cyData),style:[{selector:"node",style:{label:"data(content)","text-opacity":.7,"text-valign":"bottom","text-halign":"right","text-outline-color":"#eee","text-outline-width":1}},{selector:"[typeshape]",style:{shape:"data(typeshape)"}},{selector:"node[typeshape='diamond']",style:{"background-color":"#CC9900"}},{selector:"node[typeshape='diamond'][content='Conflict']",style:{"background-color":"red"}},{selector:"node[typeshape='diamond'][content='Support']",style:{"background-color":"green"}},{selector:"edge",style:{"line-color":"#9dbaea","target-arrow-shape":"triangle","target-arrow-color":"#9dbaea","curve-style":"bezier"}},{selector:":selected",style:{"border-width":"1","border-color":"black","background-color":"#3399CC"}},{selector:".atom-label",style:{"text-wrap":"wrap","text-max-width":160}},{selector:".scheme-label",style:{"text-wrap":"wrap","text-max-width":160}},{selector:".eh-handle",style:{"background-color":"orange",width:10,height:10,shape:"ellipse","overlay-opacity":0,"border-width":8,"border-opacity":0,label:""}}],boxSelectionEnabled:!1,autounselectify:!1,selectionType:"single",minZoom:.1,maxZoom:1.5}),this.layout=this.build_cola_layout(),this.layout.run(),this.cy.edgehandles({toggleOffOnLeave:!0,handleNodes:"node",handleSize:10,handleColor:"#DF0085",handleHitThreshold:8,handleLineWidth:5,edgeType:function(){return"flat"},complete:function(e,t,a,n){if(0!==a.length){var o=a[0].source().id(),l=a[0].target().id(),s=a[0].source().position(),i=a[0].target().position();if(this.position={},this.position.x=(s.x+i.x)/2,this.position.y=(s.y+i.y)/2,"atom"===a[0].source().data().type&&"atom"===a[0].target().data().type){var r=T("Support"),c=r.id,d=r.name;a.remove(),this.cy.add([{group:"nodes",data:{id:c.toString(),content:d,typeshape:"diamond"},classes:"scheme-label",locked:!1,position:this.position}]);var u=O(o,c),m=O(c,l);this.cy.add([{group:"edges",data:{id:u.id.toString(),source:o,target:c}},{group:"edges",data:{id:m.id.toString(),source:c,target:l}}])}else{a.remove();var h=O(o,l);this.cy.add([{group:"edges",data:{id:h.id.toString(),source:o,target:l}}])}this.props.updateLocalStorage()}else a.remove()}.bind(this)}),this.cm=this.cy.contextMenus({menuItems:[{id:"edit-content",content:"edit content",selector:'node[type = "atom"]',onClickFunction:function(e){var t=e.target||e.cyTarget;document.getElementById("editContentTrigger").click(),this.setModalValue(t.data().content),this.edit_atom=t}.bind(this),hasTrailingDivider:!1},{id:"edit-metadata",content:"edit metadata",selector:'node[type = "atom"]',onClickFunction:function(e){var t=e.target||e.cyTarget,a=JSON.stringify(t.data().metadata);document.getElementById("editMetaTrigger").click(),this.setModalValue(a),this.edit_atom=t}.bind(this),hasTrailingDivider:!0},{id:"change-scheme",content:"change scheme",selector:'node[typeshape = "diamond"]',onClickFunction:function(e){var t=e.target||e.cyTarget;this.setDropDownValue(t.data().content),document.getElementById("editSchemeTrigger").click(),this.edit_atom=t}.bind(this),hasTrailingDivider:!0},{id:"remove",content:"remove",selector:"node, edge",onClickFunction:function(e){var t=e.target||e.cyTarget;0!==this.selected.length?(this.selected.forEach(function(e){console.log(e,"SELECTED"),this.deleteNodes(e)}.bind(this)),this.selected=[]):"atom"===t.data().type?(this.deleteNodes(e),t.remove()):"diamond"===t.data().typeshape?(this.deleteNodes(e),t.remove()):(A(t.id()),this.updateLocalStorage(),t.remove())}.bind(this),hasTrailingDivider:!0},{id:"add-atom",content:"add atom",coreAsWell:!0,onClickFunction:function(e){this.position=e.renderedPosition,this.setModalValue(""),document.getElementById("newAtomTrigger").click()}.bind(this)},{id:"add-scheme",content:"add scheme",coreAsWell:!0,onClickFunction:function(e){this.position=e.position||e.cyPosition,this.setDropDownValue("Support"),document.getElementById("new_scheme").click()}.bind(this),hasTrailingDivider:!0},{id:"redraw",content:"redraw",coreAsWell:!0,onClickFunction:function(t){return e.redrawVisualisation()},hasTrailingDivider:!0},{id:"undo",content:"undo",selector:"node, edge",show:!0,coreAsWell:!0,onClickFunction:function(t){return e.undo()},hasTrailingDivider:!1},{id:"redo",content:"redo",selector:"node, edge",show:!1,coreAsWell:!0,onClickFunction:function(e){this.redo(),this.redo_stack===[]&&this.cm.hideMenuItem("redo")}.bind(this),hasTrailingDivider:!0},{id:"merge_nodes",content:"merge nodes",selector:"node",tooltipText:"hello",show:!1,coreAsWell:!0,onClickFunction:function(t){return e.merge_nodes()}}]}),this.cy.on("layoutstart",(function(){this.running=!0})),this.cy.on("layoutstop",function(){this.running=!1;var e=this.cy.png({full:!0});this.props.handleSetPng(e);var t=this.cy.jpg({full:!0});this.props.handleSetJpg(t)}.bind(this))}},{key:"build_cola_layout",value:function(e){var t={name:"cola",animate:!0,randomize:!0,padding:100,fit:!1,maxSimulationTime:1500},a=0;return void 0!==e&&e.forEach((function(n){t[a]=e[a],++a})),this.cy.makeLayout(t)}},{key:"merge_nodes",value:function(){}},{key:"setModalValue",value:function(e){var t=this;console.log(e,"NEWModalValue"),this.setState({modalValue:e},(function(){return console.log(t.state.modalValue,"modal value set")}))}},{key:"handleModalValueChange",value:function(e){var t=this;console.log(e.target.value,"E"),this.setState({modalValue:e.target.value},(function(){return console.log(t.state.modalValue,"modal value set")}))}},{key:"setDropDownValue",value:function(e){var t=this;this.setState({dropDownValue:e},(function(){return console.log(t.state.dropDownValue,"modal value set")}))}},{key:"handledropDownValue",value:function(e){var t=this;this.setState({dropDownValue:e.target.value},(function(){return console.log(t.state.dropDownValue,"dropdown value")}))}},{key:"addAtom",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;console.log(this.state.modalValue,"modal value"),null===e&&(e=this.state.modalValue),""===e&&(e="New Atom");var t={hello:"world"},a=C(e),n=a.id;null!=this.props.focused&&j(n,this.props.focused.id,e,0,0),null==this.position&&(this.position={x:this.cy.width()/2,y:this.cy.height()/2}),this.cy.add([{group:"nodes",data:{id:n.toString(),content:e,type:"atom",typeshape:"roundrectangle",metadata:t},classes:"atom-label",locked:!1,renderedPosition:this.position}]);this.cy.getElementById(n.toString());this.position=null,this.props.updateLocalStorage()}},{key:"addScheme",value:function(){var e=this.state.dropDownValue,t=T(e).id;this.cy.add([{group:"nodes",data:{id:t.toString(),content:e,type:"scheme",typeshape:"diamond"},classes:"scheme-label",locked:!1,position:this.position}]),this.props.updateLocalStorage()}},{key:"editScheme",value:function(){var e=this.state.dropDownValue,t=this.cy.$("#"+this.edit_atom.id());!function(e,t){if(e&&t){var a=J(e);if(null!==a||void 0!==a)return a.name=t,a;throw"Could not update the name of scheme: "+e}}(this.edit_atom.id(),e),this.props.updateLocalStorage(),t.data("content",e),this.edit_atom=null}},{key:"editAtomContent",value:function(){var e=this.state.modalValue,t=this.cy.$("#"+this.edit_atom.id());!function(e,t){if(e&&t){var a=R(e);if(null!==a||void 0!==a)return a.text=t,a;throw"Could not update the text value for atom: "+e}}(this.edit_atom.id(),e),this.props.updateLocalStorage(),t.data("content",e),this.edit_atom=null}},{key:"editAtomMetadata",value:function(){var e=this.cy.$("#"+this.edit_atom.id()),t=this.state.modalValue;if(JSON.parse(t)){var a=JSON.parse(t);!function(e,t){if(e&&t){var a=R(e);if(null!==a||void 0!==a)return a.metadata=t,a;throw"Could not update the metadata for atom: "+e}}(e.id(),a),this.props.updateLocalStorage(),this.edit_atom=null}else alert("Metadata not in JSON format, unable to update")}},{key:"deleteAtom",value:function(e){if(console.log(e,"AtomID"),e){var t=R(e);if(console.log(t,"ATOM"),null!==t&&void 0!==t)for(var a=Object.keys(N.nodes).length,n=0;n<a;++n)if(N.nodes[n].id===t.id)return delete N.nodes[n],void(N.nodes=G(N.nodes))}}},{key:"deleteNodes",value:function(e){var t=e.target||e.cyTarget,a=t.id();t.remove();this.deleteAtom(a);var n=0,o=H().edges;o.forEach((function(e){void 0!==o[n]&&(o[n].source_id!==a&&o[n].target_id!==a||A(o[n].id),++n)})),this.props.updateLocalStorage()}},{key:"undo",value:function(){}},{key:"redrawVisualisation",value:function(){this.layout.stop(),this.layout.options.eles=this.cy.elements(),this.layout.run(),this.cy.center(),this.cy.resize()}},{key:"dragoverHandler",value:function(e){console.log("dragoverHandler"),e.preventDefault(),e.dataTransfer.dropEffect="move"}},{key:"dropHandler",value:function(e){e.preventDefault(),this.position={x:e.clientX-300,y:e.clientY},null!==this.props.selectedText||void 0!=this.props.selectedText?(this.addAtom(this.props.selectedText),this.props.clearSelection()):console.log("Not a valid text selection.")}},{key:"componentDidMount",value:function(){this.initialise_monkeypuzzle()}},{key:"componentDidUpdate",value:function(e,t){e.cyData!==this.props.cyData&&this.initialise_monkeypuzzle(),!0===this.props.newAtomFromText&&(console.log("new atom from text"),this.addAtom(this.props.selectedText),this.props.addAtomFromText(),this.props.clearSelection()),e.showResourcePane!==this.props.showResourcePane&&this.redrawVisualisation()}},{key:"render",value:function(){var e={trigger:{triggerText:"New Atom",triggerId:"newAtomTrigger"},title:"New Atom",id:"newAtomModal",content:o.a.createElement("div",{className:"modal-body"},o.a.createElement("p",null,"Add some content to the new atom"),o.a.createElement("div",{className:"form-group"},o.a.createElement("textarea",{className:"form-control",rows:"2",id:"new_atom_content",onChange:this.handleModalValueChange}))),footer:{buttonNo:2,button1:{className:"btn btn-secondary",value:"Close"},button2:{className:"btn btn-primary",value:"Create"}}},t={trigger:{triggerText:"New Scheme",className:"new_scheme",triggerId:"new_scheme"},id:"newSchemeModal",title:"New Scheme",content:o.a.createElement("div",{className:"modal-body"},o.a.createElement("p",null,"Select a scheme"),o.a.createElement("select",{className:"form-control",id:"sel1",value:this.state.dropDownValue,onChange:this.handledropDownValue},o.a.createElement("option",null,"Support"),o.a.createElement("option",null,"Conflict"),o.a.createElement("option",null,"Argument from Sign"),o.a.createElement("option",null,"Argument from an Exceptional Case"),o.a.createElement("option",null,"Argument from Analogy"),o.a.createElement("option",null,"Argument from Bias"),o.a.createElement("option",null,"Argument from Cause to Effect"),o.a.createElement("option",null,"Argument from Correlation to Causes"),o.a.createElement("option",null,"Argument from Established Rule"),o.a.createElement("option",null,"Argument from Evidence to a Hypothesis"),o.a.createElement("option",null,"Argument from Falsification to a Hypothesis"),o.a.createElement("option",null,"Argument from Example"),o.a.createElement("option",null,"Argument from Commitment"),o.a.createElement("option",null,"Circumstantial Argument Against the Person"),o.a.createElement("option",null,"Argument from Popular Practice"),o.a.createElement("option",null,"Argument from Popularity"),o.a.createElement("option",null,"Argument from Position to Know"),o.a.createElement("option",null,"Argument from Expert Opinion"),o.a.createElement("option",null,"Argument from Precedent"),o.a.createElement("option",null,"Argument from Consequences"),o.a.createElement("option",null,"Argument from Waste"),o.a.createElement("option",null,"Causal Slippery Slope Argument"))),footer:{buttonNo:2,button1:{className:"btn btn-secondary",value:"Close"},button2:{className:"btn btn-primary",value:"Create"}}},a={trigger:{triggerText:"editContentTrigger",className:"editContentTrigger",triggerId:"editContentTrigger"},id:"editContentModal",title:"Edit Atom Content",content:o.a.createElement("div",{className:"modal-body"},o.a.createElement("p",null,"Edit atom content"),o.a.createElement("div",{className:"form-group"},o.a.createElement("textarea",{className:"form-control",rows:"2",id:"edit_atom_content_textarea",ref:this.editContentRef,value:this.state.modalValue,onChange:this.handleModalValueChange}))),footer:{buttonNo:2,button1:{className:"btn btn-secondary",value:"Close"},button2:{className:"btn btn-primary",value:"Save"}}},n={trigger:{triggerText:"Edit Meta",className:"editMeta",triggerId:"editMetaTrigger"},id:"editMetadataModal",title:"Edit Metadata",content:o.a.createElement("div",{className:"modal-body"},o.a.createElement("p",null,"Edit atom content"),o.a.createElement("div",{className:"form-group",id:"edit_metadata"},o.a.createElement("textarea",{className:"form-control",rows:"2",id:"edit_atom_content",value:this.state.modalValue,onChange:this.handleModalValueChange}))),footer:{buttonNo:2,button1:{className:"btn btn-secondary",value:"Close"},button2:{className:"btn btn-primary",value:"Save"}}},l={trigger:{triggerText:"Edit Scheme Type",className:"editScheme",triggerId:"editSchemeTrigger"},id:"editSchemeModal",title:"Edit Scheme",content:o.a.createElement("div",{className:"modal-body"},o.a.createElement("p",null,"Select a scheme"),o.a.createElement("select",{className:"form-control",id:"sel2",onChange:this.handledropDownValue,value:this.state.dropDownValue},o.a.createElement("option",null,"Support"),o.a.createElement("option",null,"Conflict"),o.a.createElement("option",null,"Argument from Sign"),o.a.createElement("option",null,"Argument from an Exceptional Case"),o.a.createElement("option",null,"Argument from Analogy"),o.a.createElement("option",null,"Argument from Bias"),o.a.createElement("option",null,"Argument from Cause to Effect"),o.a.createElement("option",null,"Argument from Correlation to Causes"),o.a.createElement("option",null,"Argument from Established Rule"),o.a.createElement("option",null,"Argument from Evidence to a Hypothesis"),o.a.createElement("option",null,"Argument from Falsification to a Hypothesis"),o.a.createElement("option",null,"Argument from Example"),o.a.createElement("option",null,"Argument from Commitment"),o.a.createElement("option",null,"Circumstantial Argument Against the Person"),o.a.createElement("option",null,"Argument from Popular Practice"),o.a.createElement("option",null,"Argument from Popularity"),o.a.createElement("option",null,"Argument from Position to Know"),o.a.createElement("option",null,"Argument from Expert Opinion"),o.a.createElement("option",null,"Argument from Precedent"),o.a.createElement("option",null,"Argument from Consequences"),o.a.createElement("option",null,"Argument from Waste"),o.a.createElement("option",null,"Causal Slippery Slope Argument"))),footer:{buttonNo:2,button1:{className:"btn btn-secondary",value:"Close"},button2:{className:"btn btn-primary",value:"Save"}}};return o.a.createElement("div",null,o.a.createElement(_,{modalProps:e,show:"none",onClick:this.addAtom}),o.a.createElement(_,{modalProps:t,show:"none",onClick:this.addScheme}),o.a.createElement(_,{modalProps:a,show:"none",onClick:this.editAtomContent}),o.a.createElement(_,{modalProps:n,show:"none",onClick:this.editAtomMetadata}),o.a.createElement(_,{modalProps:l,show:"none",onClick:this.editScheme}),o.a.createElement("div",{id:"cy",onDrop:this.dropHandler,onDragOver:this.dragoverHandler}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.cyData!==t.cyData?{cyData:e.cyData}:null}}]),t}(n.Component),re=(a(74),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={showResourcePane:!0,newResource:null,resourcesFromJson:null,selectedText:"",cyData:null,jpg:"",png:"",fileName:"",json:"",current_sadface_doc:null,focused:null,newAtomFromText:!1,uploadSADFACE:null,undo_stack:[],redo_stack:[]},a.toggleMenu=a.toggleMenu.bind(Object(h.a)(a)),a.loadJSON=a.loadJSON.bind(Object(h.a)(a)),a.fileManager=a.fileManager.bind(Object(h.a)(a)),a.setCyData=a.setCyData.bind(Object(h.a)(a)),a.toggleResourcePane=a.toggleResourcePane.bind(Object(h.a)(a)),a.setNewResource=a.setNewResource.bind(Object(h.a)(a)),a.setResourcesFromJson=a.setResourcesFromJson.bind(Object(h.a)(a)),a.setSelectedText=a.setSelectedText.bind(Object(h.a)(a)),a.addAtomFromText=a.addAtomFromText.bind(Object(h.a)(a)),a.handleSetPng=a.handleSetPng.bind(Object(h.a)(a)),a.handleSetJpg=a.handleSetJpg.bind(Object(h.a)(a)),a.load_demo_argument=a.load_demo_argument.bind(Object(h.a)(a)),a.setFileName=a.setFileName.bind(Object(h.a)(a)),a.clearSelection=a.clearSelection.bind(Object(h.a)(a)),a.setCurrentSadFaceDoc=a.setCurrentSadFaceDoc.bind(Object(h.a)(a)),a.updateLocalStorage=a.updateLocalStorage.bind(Object(h.a)(a)),a.setFocus=a.setFocus.bind(Object(h.a)(a)),a.setUndoStack=a.setUndoStack.bind(Object(h.a)(a)),a.setRedoStack=a.setRedoStack.bind(Object(h.a)(a)),a.returnSD=a.returnSD.bind(Object(h.a)(a)),a}return Object(p.a)(t,e),Object(d.a)(t,[{key:"updateLocalStorage",value:function(){var e=JSON.parse(this.state.current_sadface_doc);this.setUndoStack(e),this.setRedoStack([]),localStorage.setItem("state",JSON.stringify(H())),this.setCurrentSadFaceDoc(JSON.stringify(H())),N.edited=I()}},{key:"setUndoStack",value:function(e){var t=this;this.setState({undo_stack:[].concat(Object(r.a)(this.state.undo_stack),[e])},(function(){return console.log(t.state.undo_stack,"undoStack")}))}},{key:"setRedoStack",value:function(e){var t=this;this.setState({redo_stack:e},(function(){return console.log(t.state.redo_stack,"redoStack")}))}},{key:"setCurrentSadFaceDoc",value:function(e){this.setState({current_sadface_doc:e},(function(){return console.log("current sad face doc updated")}))}},{key:"addAtomFromText",value:function(){var e=this;console.log("addAtomFromText"),this.setState({newAtomFromText:!this.state.newAtomFromText},(function(){return console.log(e.state.newAtomFromText,"set newAtomFromText")}))}},{key:"handleSetPng",value:function(e){var t=this;this.setState({png:e},(function(){return console.log(t.state.png,"PNG set")}))}},{key:"handleSetJpg",value:function(e){this.setState({jpg:e},(function(){return console.log("JPG set")}))}},{key:"componentDidMount",value:function(){this.slideout=new f.a({panel:document.getElementById("panel"),menu:document.getElementById("menu"),fx:"ease",side:"right",duration:500,padding:256,tolerance:70})}},{key:"toggleMenu",value:function(){this.slideout.toggle()}},{key:"fileManager",value:function(e,t,a,n){if("save"===e){if("txt"===t)U(""!==a.metadata.title?a.metadata.title+".txt":"tab "+a.id+"_text.txt",a.content);if("json"===t){var o=this.state.fileName;0===o.length&&(o="default"),L(o,t)}}if("load"===e){if("txt"===t){var l=n[0],s=l.name,i=new FileReader;i.onload=function(e){var t=i.result;B(a.id,t,s);var n={};n.tab=a,n.filename=s,n.content=t,this.setNewResource(n)}.bind(this),i.readAsText(l)}if("json"===t){var r=function(e){if(e){var t=new FileReader;return t.readAsText(e),t}}(n[0]);null!==r&&(r.onload=function(e){var t=r.result;localStorage.setItem("state",t),this.loadJSON(t)}.bind(this))}}}},{key:"setNewResource",value:function(e){var t=this;this.setState({newResource:e},(function(){return console.log(t.state.newResource,"newresource set")}))}},{key:"loadJSON",value:function(e){if(console.log(e),null!=e){var t=V(e);localStorage.setItem("state",JSON.stringify(H())),this.setCurrentSadFaceDoc(JSON.stringify(H())),this.setResourcesFromJson(t.resources),this.setCyData(F(t))}}},{key:"setResourcesFromJson",value:function(e){var t=this;this.setState({resourcesFromJson:e},(function(){return console.log(t.state.resourcesFromJson,"resourcesFromJson set")}))}},{key:"setSelectedText",value:function(e){var t=this;null!==e&&e.length>1?this.setState((function(t){return{selectedText:e}}),(function(){return console.log(t.state.selectedText,"setSelectedText")})):this.clearSelection()}},{key:"setFocus",value:function(e){var t=this;this.setState({focused:e},(function(){return console.log(t.state.focused,"focus set")}))}},{key:"clearSelection",value:function(){var e=this;this.setState((function(){return{selectedText:""}}),(function(){return console.log(e.state.selectedText,"clear selection")}))}},{key:"toggleResourcePane",value:function(){this.setState({showResourcePane:!this.state.showResourcePane})}},{key:"setFileName",value:function(e){var t=this;this.setState({fileName:e},(function(){return console.log(t.state.fileName,"filename app")}))}},{key:"load_demo_argument",value:function(){var e='{"analyst_email":"40170722@live.napier.ac.uk","analyst_name":"Nathan Mair","created":"2018-02-23T02:27:36","edges":[{"id":"a1s1","source_id":"a1","target_id":"s1"},{"id":"a2s1","source_id":"a2","target_id":"s1"},{"id":"a3s2","source_id":"a3","target_id":"s2"},{"id":"s2a5","source_id":"s2","target_id":"a5"},{"id":"s1a4","source_id":"s1","target_id":"a4"},{"id":"a4s2","source_id":"a4","target_id":"s2"}],"edited":"2018-02-23T02:27:36","id":"94a975db-25ae-4d25-93cc-1c07c932e2f9","metadata":{},"nodes":[{"id":"a1","metadata":{},"sources":[],"text":"Every person is going to die","type":"atom"},{"id":"a2","metadata":{},"sources":[],"text":"You are a person","type":"atom"},{"id":"a3","metadata":{"test":"test"},"sources":[],"text":"If you are going to die then you should treasure every moment","type":"atom"},{"id":"a4","metadata":{},"sources":[],"text":"You are going to die","type":"atom"},{"id":"a5","metadata":{},"sources":[],"text":"You should treasure every moment","type":"atom"},{"id":"s1","name":"Support","type":"scheme"},{"id":"s2","name":"Support","type":"scheme"}],"resources": []}';localStorage.setItem("state",e),this.setCyData(F(V(e)))}},{key:"setCyData",value:function(e){this.setState({cyData:e},(function(){return console.log("cydata set")}))}},{key:"returnSD",value:function(){var e=H();console.log(e)}},{key:"render",value:function(){var e;return o.a.createElement("div",null,o.a.createElement(W,{toggleResourcePane:this.toggleResourcePane,load_demo_argument:this.load_demo_argument,setFileName:this.setFileName,fileManager:this.fileManager,setUploadSADFACE:this.setUploadSADFACE,png:this.state.png,jpg:this.state.jpg,fileName:this.state.fileName}),o.a.createElement("main",{id:"panel",className:"panel"},o.a.createElement("div",{className:"ui-container"},o.a.createElement($,{showResourcePane:this.state.showResourcePane,newResource:this.state.newResource,resourcesFromJson:this.state.resourcesFromJson,selectedText:this.state.selectedText,updateLocalStorage:this.updateLocalStorage,fileManager:this.fileManager,setFocus:this.setFocus,setSelectedText:this.setSelectedText,addAtomFromText:this.addAtomFromText}),o.a.createElement("div",{className:"splitter",id:"splitter"}),o.a.createElement("div",{className:"visualisation-pane"},o.a.createElement("div",{id:"navbar"},o.a.createElement(q,{className:"btn-hamburger toggle-button",onClick:this.toggleMenu})),o.a.createElement(ie,(e={showResourcePane:this.state.showResourcePane,cyData:this.state.cyData,newAtomFromText:this.state.newAtomFromText,selectedText:this.state.selectedText,focused:this.state.focused},Object(i.a)(e,"newAtomFromText",this.state.newAtomFromText),Object(i.a)(e,"current_sadface_doc",this.state.current_sadface_doc),Object(i.a)(e,"undo_stack",this.state.undo_stack),Object(i.a)(e,"redo_stack",this.state.redo_stack),Object(i.a)(e,"setRedoStack",this.setRedoStack),Object(i.a)(e,"setUndoStack",this.setUndoStack),Object(i.a)(e,"addAtomFromText",this.addAtomFromText),Object(i.a)(e,"handleSetPng",this.handleSetPng),Object(i.a)(e,"handleSetJpg",this.handleSetJpg),Object(i.a)(e,"loadJSON",this.loadJSON),Object(i.a)(e,"setCurrentSadFaceDoc",this.setCurrentSadFaceDoc),Object(i.a)(e,"setCyData",this.setCyData),Object(i.a)(e,"updateLocalStorage",this.updateLocalStorage),Object(i.a)(e,"clearSelection",this.clearSelection),e))))))}}]),t}(n.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(75);s.a.render(o.a.createElement(re,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[36,1,2]]]);
//# sourceMappingURL=main.500a8acb.chunk.js.map