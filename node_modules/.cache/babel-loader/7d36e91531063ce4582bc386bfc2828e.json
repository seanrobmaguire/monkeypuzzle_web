{"ast":null,"code":"var _jsxFileName = \"/Users/gareth/Desktop/Sean/monkeypuzzle/monkeypuzzle/src/App.js\";\nimport React, { Component } from 'react';\nimport Slideout from 'slideout';\nimport MainUI from './Components/MainUI';\nimport SlideIn from './Components/SlideIn'; //import Modal from './Components/Modal';\n//import Test from './Test';\n\nimport './CSS/monkeypuzzle.css'; //import './CSS/font-awesome.min.css';\n\nimport './CSS/cytoscape-context-menus.css'; //import './CSS/jquery.qtip.min.css';\n//import './CSS/bootstrap.min.css';\n\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport './CSS/App.css';\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n\n    this.add_to_tabs_arr = (tab_id, tab_number) => {\n      this.setState(state => {\n        const tabs = state.tabs.concat({\n          tab_id: tab_id,\n          tab_number: tab_number\n        });\n        console.log(\"add to tabs arr \" + tabs);\n        return {\n          tabs\n        };\n      });\n    };\n\n    this.state = {\n      tabs: [],\n      last_number: 1,\n      tab_id: \"\",\n      sd: {}\n    };\n    this.add_tab = this.add_tab.bind(this);\n    this.toggleButton = this.toggleButton.bind(this);\n    this.add_resource = this.add_resource.bind(this);\n    this.add_resource_header = this.add_resource_header.bind(this);\n    this.add_to_tabs_arr = this.add_to_tabs_arr.bind(this);\n    this.remove_tab = this.remove_tab.bind(this);\n    this.download = this.download.bind(this);\n    this.saveSADFace = this.saveSADFace.bind(this);\n    this.update_resource = this.update_resource.bind(this);\n    this.loadSADFace = this.loadSADFace.bind(this);\n    this.loadJSON = this.loadJSON.bind(this);\n    this.remove_all_tabs = this.remove_all_tabs.bind(this);\n    this.loadTabs = this.loadTabs.bind(this);\n    this.update_resource = this.update_resource.bind(this);\n  }\n\n  set_State(value) {\n    this.setState({\n      tab_id: value\n    });\n    console.log(\"set state \" + this.state.tab_id);\n  }\n\n  add_resource(content) {\n    /*\n    Create a new resource dict using the supplied content string\n    then add to the resourses list of the sadface doc\n     Returns: the new resource dict\n    */\n    if (content) {\n      var res = this.new_resource(content); // sd.resources.push(res);\n\n      return res;\n    }\n  }\n\n  createNewTab() {}\n\n  next_number() {\n    var current_number = this.state.last_number;\n    this.setState({\n      last_number: this.state.last_number + 1\n    });\n    return current_number;\n  }\n\n  add_tab(load_id = null) {\n    if (load_id == null) {\n      var new_resource = this.add_resource(' ');\n      this.setState({\n        tab_id: new_resource.id\n      }, () => {\n        console.log(\"add tab tab_id \" + this.state.tab_id); //  add_resource_metadata(tab_id, 'title', '');\n        //localStorage.setItem(\"state\",JSON.stringify(get_sd()));\n\n        this.add_resource_header();\n      });\n    } else {\n      this.setState({\n        tab_id: load_id\n      }, () => {\n        console.log(\"tab_id=load id: \" + this.state.tab_id);\n        this.add_resource_header();\n      });\n    } // \n    //  var resource_type_idx = document.getElementById(\"resource_type\").options.selectedIndex;\n    //  var resource_type_txt = document.getElementById(\"resource_type\").options[resource_type_idx].text;\n    //  if (resource_type_txt.toLowerCase() === \"text\") { add_text_resource_body(tab_id); }\n    //  set_active_tab(tab_id+\"_body\");\n    // return this.state.tab_id\n\n  }\n\n  add_resource_header() {\n    console.log(\"add Resource header \" + this.state.tab_id);\n    var tab_number = this.next_number();\n    this.add_to_tabs_arr(this.state.tab_id, tab_number);\n    console.log(\"Show tabs\" + tab_number);\n  }\n\n  new_resource(content) {\n    /*\n    Given the supplied content (String), create a new resource dict\n     The arguments that SADFace describes are either constructed directly in a tool that writes\n    them to this format, or else are sourced from elsewhere, e.g. an argumentative text or\n    webpage, or else perhaps another medium, such as audio or video. Currently SADFace supports\n    textual resources which are stored in the content key. Optionally a \n        \"url\":\"some web location\"\n    pair can be added to the metadata to indicate a specific web location. Alternatively:\n        \"doi\":\"digital object identifier\" - resolvable by dx.doi.org\n        \"magnet-link\":\"a torrent file\"\n        \"isbn\":\"for books\"\n    Metadata may also store additional bibliographic or referencing/citation information\n    as defined in bibtex formats.\n     Returns: A dict representing the new SADFace resource\n    */\n    if (content) {\n      var new_resource = {\n        \"id\": this.new_uuid(),\n        \"content\": content,\n        \"type\": \"text\",\n        \"metadata\": {}\n      };\n      return new_resource;\n    }\n  } //uuid function from https://stackoverflow.com/questions/105034/create-guid-uuid-in-javascript\n\n\n  new_uuid() {\n    /*\n    Utility method to generate a new universally unique ID. Used througout to uniquely\n    identify various items such as atoms, schemes, resources, & edges\n     Returns: A string\n    */\n    return ([1e7] + -1e3 + -4e3 + -8e3 + -1e11).replace(/[018]/g, c => (c ^ crypto.getRandomValues(new Uint8Array(1))[0] & 15 >> c / 4).toString(16));\n  }\n\n  componentDidMount() {\n    this.slideout = new Slideout({\n      'panel': document.getElementById('panel'),\n      'menu': document.getElementById('menu'),\n      \"fx\": \"ease\",\n      \"side\": \"right\",\n      \"duration\": 500,\n      \"padding\": 256,\n      \"tolerance\": 70\n    });\n  }\n\n  remove_tab(i) {\n    this.setState(state => {\n      const tabs = state.tabs.filter((item, j) => i !== j);\n      return {\n        tabs\n      };\n    });\n    /*\n        delete_resource(current_tab);\n        sd.nodes.forEach((node) => {\n            if (node.type == 'atom') {\n                if (current_tab in node.sources) {\n                    delete_source(node.id, current_tab);\n                }\n            }\n        });\n        \n        localStorage.setItem(\"state\",JSON.stringify(get_sd()));\n        if (tabs.length >= 1 && idx != -1)\n        {\n            tabs.splice(idx, 1);\n            current_tab = tabs[tabs.length-1];\n            set_active_tab(current_tab+\"_body\");\n        }\n    */\n  }\n\n  remove_all_tabs() {}\n\n  toggleButton() {\n    this.slideout.toggle();\n  }\n\n  download() {}\n\n  fileManager(operation, filetype, tab_id) {\n    /*\n    Write text from tab to file or does a SADFace save operation\n    */\n    console.log(operation, filetype, tab_id);\n\n    if (\"save\" == operation) {\n      // if it's a txt file\n      if (\"txt\" == filetype) {\n        if (document.getElementById(\"title_\" + tab_id).value !== '') {\n          var filename = document.getElementById(\"title_\" + tab_id).value + \".txt\";\n        } else {\n          var filename = \"tab\" + tab_id + \"_text.txt\";\n        }\n\n        var text = document.getElementById(tab_id).value;\n        this.download(filename, text);\n      } // if it's a JSON file\n\n\n      if (\"json\" == filetype) {\n        var filename = document.getElementById(\"export_filename\").value;\n\n        if (filename.length == 0) {\n          filename = \"default\";\n        }\n\n        this.saveSADFace(filename, filetype);\n      }\n    } //if it's a load operation\n\n\n    if (\"load\" == operation) {\n      // if it's a txt file\n      if (\"txt\" == filetype) {\n        var files = document.getElementById(\"load\" + tab_id).files;\n        var file = files[0];\n        var filename = file.name;\n        document.getElementById(\"title_\" + tab_id).innerText = filename;\n        console.log(file.name);\n        var reader = new FileReader();\n\n        reader.onload = function (e) {\n          var content = reader.result;\n          document.getElementById(tab_id).innerText = content;\n          this.update_resource(tab_id, content, filename);\n        };\n\n        reader.readAsText(file);\n      } // if it's a JSON file\n\n\n      if (\"json\" == filetype) {\n        var files = document.getElementById(\"loadJSON\").files;\n        var file = files[0];\n        var reader = this.loadSADFace(file);\n\n        reader.onload = function (e) {\n          var result = reader.result;\n          localStorage.setItem(\"state\", result);\n          this.loadJSON(result);\n          var json = JSON.parse(result);\n          this.remove_all_tabs();\n          this.loadTabs(json.resources);\n        };\n      }\n    }\n  }\n\n  update_resource(resource_id, content, title) {\n    /*\n    Given an ID for an existing resource, update the content and metadata of the resource.\n    Updates the resource in sd;\n    */\n    if (resource_id && (content || title)) {\n      var resource = get_resource(resource_id);\n\n      if (resource !== null && resource !== undefined) {\n        if (content !== null && content !== undefined) {\n          resource.content = content;\n        }\n\n        if (title !== null && title !== undefined) {\n          resource.metadata.title = title;\n        }\n\n        sd.resources.forEach(res => {\n          if (res.id === resource_id) {\n            res = resource;\n          }\n        });\n      } else {\n        throw \"Could not update the resource: \" + resource_id;\n      }\n    }\n  }\n\n  loadTabs() {}\n\n  saveSADFace() {}\n\n  loadSADFace() {}\n\n  loadJSON() {}\n\n  update_resource() {}\n\n  render() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 347\n      },\n      __self: this\n    }, React.createElement(SlideIn, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 351\n      },\n      __self: this\n    }), React.createElement(MainUI, {\n      toggleSlideIn: () => this.toggleButton(),\n      addTab: () => this.add_tab(),\n      tabs: this.state.tabs,\n      remove_tab: this.remove_tab,\n      fileManager: this.fileManager,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 361\n      },\n      __self: this\n    }));\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["/Users/gareth/Desktop/Sean/monkeypuzzle/monkeypuzzle/src/App.js"],"names":["React","Component","Slideout","MainUI","SlideIn","App","constructor","props","add_to_tabs_arr","tab_id","tab_number","setState","state","tabs","concat","console","log","last_number","sd","add_tab","bind","toggleButton","add_resource","add_resource_header","remove_tab","download","saveSADFace","update_resource","loadSADFace","loadJSON","remove_all_tabs","loadTabs","set_State","value","content","res","new_resource","createNewTab","next_number","current_number","load_id","id","new_uuid","replace","c","crypto","getRandomValues","Uint8Array","toString","componentDidMount","slideout","document","getElementById","i","filter","item","j","toggle","fileManager","operation","filetype","filename","text","length","files","file","name","innerText","reader","FileReader","onload","e","result","readAsText","localStorage","setItem","json","JSON","parse","resources","resource_id","title","resource","get_resource","undefined","metadata","forEach","render"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport Slideout from 'slideout';\n\n\nimport MainUI from './Components/MainUI';\nimport SlideIn from './Components/SlideIn';\n\n//import Modal from './Components/Modal';\n\n//import Test from './Test';\n\n\nimport './CSS/monkeypuzzle.css';\n//import './CSS/font-awesome.min.css';\nimport './CSS/cytoscape-context-menus.css';\n//import './CSS/jquery.qtip.min.css';\n//import './CSS/bootstrap.min.css';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport './CSS/App.css';\n\n\n\n\n\n\nclass App extends Component{\n\tconstructor(props){\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\ttabs: [],\n\t\t\tlast_number: 1,\n\t\t\ttab_id:\"\",\n            sd: {},\n\n\n\t\t};\n\n\t\tthis.add_tab = this.add_tab.bind(this);\n\t\tthis.toggleButton = this.toggleButton.bind(this);\n\t\tthis.add_resource =this.add_resource.bind(this);\n\t\tthis.add_resource_header = this.add_resource_header.bind(this);\n\t\tthis.add_to_tabs_arr =this.add_to_tabs_arr.bind(this);\n        this.remove_tab =this.remove_tab.bind(this);\n        this.download = this.download.bind(this);\n        this.saveSADFace = this.saveSADFace.bind(this);\n        this.update_resource =this.update_resource.bind(this);\n        this.loadSADFace =this.loadSADFace.bind(this);\n        this.loadJSON = this.loadJSON.bind(this);\n        this.remove_all_tabs = this.remove_all_tabs.bind(this);\n        this.loadTabs =this.loadTabs.bind(this);\n        this.update_resource = this.update_resource.bind(this);\n\t}\n\n\tset_State(value) {\n\t    \tthis.setState({tab_id: value});\n\t    \tconsole.log(\"set state \"+ this.state.tab_id);\n\n}\n\n\tadd_resource(content) {\n    /*\n    Create a new resource dict using the supplied content string\n    then add to the resourses list of the sadface doc\n\n    Returns: the new resource dict\n    */\n    if (content) {\n        var res = this.new_resource(content);\n       // sd.resources.push(res);\n        return res;\n    }\n}\n\n\n\nadd_to_tabs_arr = (tab_id, tab_number) => {\n\tthis.setState(state => {\n\t\tconst tabs = state.tabs.concat({tab_id:tab_id, tab_number: tab_number});\n\t\tconsole.log(\"add to tabs arr \" + tabs);\n\t\treturn {\n\t\t\ttabs,\n\t\t};\n\t});\n};\n\ncreateNewTab(){\n\n}\n\n next_number(){\n \t var current_number = this.state.last_number\n \t this.setState({ last_number: this.state.last_number + 1})\n \t return current_number;\n }\n \t\n\n\t\n\n\tadd_tab(load_id=null){\n\t\tif (load_id == null) {\n        var new_resource = this.add_resource(' ');\n    \tthis.setState({\n    \t\ttab_id: new_resource.id\n    \t}, () => {\n    \t\tconsole.log(\"add tab tab_id \" +this.state.tab_id);\n    \t//  add_resource_metadata(tab_id, 'title', '');\n\t\t//localStorage.setItem(\"state\",JSON.stringify(get_sd()));\n\n    \t\tthis.add_resource_header();\n    \t});\n    \t    \t\t    \n\n\t\t} \n    \telse { \n    \t\tthis.setState({\n    \t\ttab_id: load_id \n    \t\t}, () => {\n    \t\t\tconsole.log(\"tab_id=load id: \"+this.state.tab_id);\n    \t\t\tthis.add_resource_header();\n    \t\t});\n    \t}\n\n    \t// \n\n  //  var resource_type_idx = document.getElementById(\"resource_type\").options.selectedIndex;\n  //  var resource_type_txt = document.getElementById(\"resource_type\").options[resource_type_idx].text;\n  //  if (resource_type_txt.toLowerCase() === \"text\") { add_text_resource_body(tab_id); }\n\n  //  set_active_tab(tab_id+\"_body\");\n   // return this.state.tab_id\n    }\n\n   \n\n\t\n\n\tadd_resource_header() {\n \tconsole.log(\"add Resource header \"+ this.state.tab_id);\n  \tvar tab_number = this.next_number();\n  \tthis.add_to_tabs_arr(this.state.tab_id, tab_number);\n    console.log(\"Show tabs\"+ tab_number);\n}\n\n\t new_resource(content) {\n    /*\n    Given the supplied content (String), create a new resource dict\n\n    The arguments that SADFace describes are either constructed directly in a tool that writes\n    them to this format, or else are sourced from elsewhere, e.g. an argumentative text or\n    webpage, or else perhaps another medium, such as audio or video. Currently SADFace supports\n    textual resources which are stored in the content key. Optionally a \n        \"url\":\"some web location\"\n    pair can be added to the metadata to indicate a specific web location. Alternatively:\n        \"doi\":\"digital object identifier\" - resolvable by dx.doi.org\n        \"magnet-link\":\"a torrent file\"\n        \"isbn\":\"for books\"\n    Metadata may also store additional bibliographic or referencing/citation information\n    as defined in bibtex formats.\n\n    Returns: A dict representing the new SADFace resource\n    */\n    if (content) {\n        var new_resource = {\"id\":this.new_uuid(), \"content\":content, \"type\":\"text\", \"metadata\":{}};\n        return new_resource;\n    }\n}\n\n\n\n//uuid function from https://stackoverflow.com/questions/105034/create-guid-uuid-in-javascript\n new_uuid() {\n    /*\n    Utility method to generate a new universally unique ID. Used througout to uniquely\n    identify various items such as atoms, schemes, resources, & edges\n\n    Returns: A string\n    */\n    return ([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g, c =>\n        (c ^ crypto.getRandomValues(new Uint8Array(1))[0] & 15 >> c / 4).toString(16)\n    );\n}\n\n \tcomponentDidMount() {\n  \tthis.slideout = new Slideout({\n    'panel': document.getElementById('panel'),\n    'menu': document.getElementById('menu'),\n    \"fx\": \"ease\",\n    \"side\": \"right\",\n    \"duration\": 500,\n    \"padding\": 256,\n    \"tolerance\": 70\n\n  });\n}\n\nremove_tab(i){\n    this.setState(state =>{\n        const tabs = state.tabs.filter((item, j) => i !==j);\n        return {\n            tabs,\n        };\n    });\n/*\n    delete_resource(current_tab);\n    sd.nodes.forEach((node) => {\n        if (node.type == 'atom') {\n            if (current_tab in node.sources) {\n                delete_source(node.id, current_tab);\n            }\n        }\n    });\n    \n    localStorage.setItem(\"state\",JSON.stringify(get_sd()));\n    if (tabs.length >= 1 && idx != -1)\n    {\n        tabs.splice(idx, 1);\n        current_tab = tabs[tabs.length-1];\n        set_active_tab(current_tab+\"_body\");\n    }\n*/\n};\n\nremove_all_tabs(){\n\n}\n\n\n\n\ntoggleButton(){\n        this.slideout.toggle();\n\t}\n\ndownload(){\n\n}\n\n    fileManager(operation, filetype, tab_id) {\n    /*\n    Write text from tab to file or does a SADFace save operation\n    */\n\n    console.log(operation, filetype, tab_id);\n   if (\"save\" == operation)    {\n        // if it's a txt file\n        if (\"txt\" == filetype) {    \n            if (document.getElementById(\"title_\"+tab_id).value !== '') {\n                var filename = document.getElementById(\"title_\"+tab_id).value+\".txt\";\n            } else {\n                var filename = \"tab\"+tab_id+\"_text.txt\";\n            }\n            var text = document.getElementById(tab_id).value;\n            this.download(filename,text);\n        }\n        \n        // if it's a JSON file\n        if (\"json\" == filetype) {\n            var filename = document.getElementById(\"export_filename\").value;\n            if(filename.length == 0){ filename = \"default\"}\n            this.saveSADFace(filename, filetype);\n        }\n    }\n    \n    //if it's a load operation\n    if (\"load\" == operation) {\n        // if it's a txt file\n        if (\"txt\" == filetype) {\n            var files = document.getElementById(\"load\"+tab_id).files;\n            var file = files[0];\n            var filename = file.name;\n            document.getElementById(\"title_\"+tab_id).innerText = filename;\n            console.log(file.name);\n            var reader = new FileReader();      \n            reader.onload = function(e) {\n                var content = reader.result;\n                document.getElementById(tab_id).innerText = content;\n                this.update_resource(tab_id, content, filename);\n            }\n            reader.readAsText(file);\n        }\n        // if it's a JSON file\n        if (\"json\" == filetype) {\n            var files = document.getElementById(\"loadJSON\").files;\n            var file = files[0];\n            var reader = this.loadSADFace(file);\n            reader.onload = function(e) {\n                var result = reader.result;\n                localStorage.setItem(\"state\",result);\n                this.loadJSON(result);\n                var json = JSON.parse(result);\n                this.remove_all_tabs();\n                this.loadTabs(json.resources);\n            }\n        }\n    }\n}\n update_resource(resource_id, content, title) {\n    /*\n    Given an ID for an existing resource, update the content and metadata of the resource.\n    Updates the resource in sd;\n    */\n\n    if (resource_id && (content || title)) {\n        var resource = get_resource(resource_id);\n        if (resource !== null && resource !== undefined) {\n            if (content !== null && content !== undefined) {\n                resource.content = content;\n            }\n            if (title !== null && title !== undefined) {\n                resource.metadata.title = title;\n            }\n            sd.resources.forEach((res) => {\n                if(res.id === resource_id) {\n                    res = resource;\n                }\n            });\n        } else {\n            throw (\"Could not update the resource: \"+resource_id);\n        }\n    }\n}\nloadTabs(){\n\n}\n\nsaveSADFace(){\n\n}\n\nloadSADFace(){\n\n}\n\nloadJSON(){\n\n}\n\nupdate_resource(){\n\n}\n\n\n \n  render(){\n\n    return (\n    \t<div>\n        \n\t    \t \n      \n    \t<SlideIn />\n{/*}\n    \t<MainUI\n    \t\taddTab = {() => this.add_tab()}\n    \t\ttabs = {this.state.tabs}\n    \t\t/>\n\n    \n\n*/}\n\t\t\t<MainUI\n\t\t\t   toggleSlideIn={() => this.toggleButton()}\n\t\t\t   addTab = {() => this.add_tab()}\n\t\t\t   tabs = {this.state.tabs}\n               remove_tab={this.remove_tab}\n               fileManager={this.fileManager}\n\n\n\t\t\t/>\n \n   </div>\n\n      );\n  }\n}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}