{"ast":null,"code":"\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar layout_1 = require(\"./layout\");\n\nvar D3StyleLayoutAdaptor = function (_super) {\n  __extends(D3StyleLayoutAdaptor, _super);\n\n  function D3StyleLayoutAdaptor(d3Context) {\n    var _this = _super.call(this) || this;\n\n    _this.d3Context = d3Context;\n    _this.event = d3Context.dispatch(layout_1.EventType[layout_1.EventType.start], layout_1.EventType[layout_1.EventType.tick], layout_1.EventType[layout_1.EventType.end]);\n    var d3layout = _this;\n    var drag;\n\n    _this.drag = function () {\n      if (!drag) {\n        var drag = d3Context.drag().subject(layout_1.Layout.dragOrigin).on(\"start.d3adaptor\", layout_1.Layout.dragStart).on(\"drag.d3adaptor\", function (d) {\n          layout_1.Layout.drag(d, d3Context.event);\n          d3layout.resume();\n        }).on(\"end.d3adaptor\", layout_1.Layout.dragEnd);\n      }\n\n      if (!arguments.length) return drag;\n      arguments[0].call(drag);\n    };\n\n    return _this;\n  }\n\n  D3StyleLayoutAdaptor.prototype.trigger = function (e) {\n    var d3event = {\n      type: layout_1.EventType[e.type],\n      alpha: e.alpha,\n      stress: e.stress\n    };\n    this.event.call(d3event.type, d3event);\n  };\n\n  D3StyleLayoutAdaptor.prototype.kick = function () {\n    var _this = this;\n\n    var t = this.d3Context.timer(function () {\n      return _super.prototype.tick.call(_this) && t.stop();\n    });\n  };\n\n  D3StyleLayoutAdaptor.prototype.on = function (eventType, listener) {\n    if (typeof eventType === 'string') {\n      this.event.on(eventType, listener);\n    } else {\n      this.event.on(layout_1.EventType[eventType], listener);\n    }\n\n    return this;\n  };\n\n  return D3StyleLayoutAdaptor;\n}(layout_1.Layout);\n\nexports.D3StyleLayoutAdaptor = D3StyleLayoutAdaptor;","map":null,"metadata":{},"sourceType":"script"}