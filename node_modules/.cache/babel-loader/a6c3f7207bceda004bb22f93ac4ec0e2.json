{"ast":null,"code":"var _jsxFileName = \"/Users/gareth/Desktop/monkeypuzzle/src/Components/ResourcePane.js\";\nimport React, { Component } from 'react';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faPlusSquare } from '@fortawesome/free-solid-svg-icons'; //Import Components\n\nimport Modal from './Modal';\nimport { newResourceModal } from './ModalData.jsx';\nimport Button from 'react-bootstrap/Button';\n\nclass ResourcePane extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      //tabs: this.props.tabs,\n      activeTab: 1,\n      last_number: 0\n    };\n    this.handlefileManager = this.handlefileManager.bind(this);\n    this.remove_all_tabs = this.remove_all_tabs.bind(this);\n    this.handleAdd = this.handleAdd.bind(this);\n    this.returnType = this.returnType.bind(this);\n    this.handlegetType = this.handlegetType.bind(this);\n    this.next_number = this.next_number.bind(this);\n    this.increment_next = this.increment_next.bind(this);\n    var tabNumber = 0;\n  }\n\n  /*\n      setActiveTab(value){\n          this.setState({\n              activeTab: value\n          }, function (){\n              console.log(this.state.activeTab, 'active');\n          });\n      }\n  */\n  returnType() {\n    var resource_type_idx = document.getElementById(\"resource_type\").options.selectedIndex;\n    var resource_type_txt = document.getElementById(\"resource_type\").options[resource_type_idx].text;\n    let type = resource_type_txt.toLowerCase();\n    this.props.getType(type);\n  }\n\n  next_number() {\n    return tabNumber++;\n  }\n\n  increment_next() {\n    this.setState({\n      last_number: this.state.last_number + 1\n    });\n  }\n\n  handleAdd() {\n    this.props.addTab();\n    console.log(\"handleADD\");\n  }\n\n  searchTabs(tab) {}\n\n  remove_all_tabs() {\n    console.log(\"remove tabs resource pane\");\n  }\n\n  handlefileManager() {\n    this.props.fileManager();\n  }\n\n  componentDidMount() {\n    this.setState({\n      activeTab: this.props.activeTab\n    });\n    console.log(this.state.activeTab, 'active tabs');\n  }\n\n  componentDidUpdate(prevProps) {\n    // Typical usage (don't forget to compare props):\n    if (this.props.remove_all_tabs !== prevProps.remove_all_tabs) {\n      this.remove_all_tabs();\n    }\n  }\n\n  handlegetType(e) {\n    let type = e.target.value;\n    console.log(type, 'resourcePane type');\n  }\n\n  render() {\n    const activeTab = this.props.activeTab;\n    const newResourceModal = {\n      trigger: {\n        triggerText: React.createElement(FontAwesomeIcon, {\n          icon: faPlusSquare,\n          size: \"lg\",\n          color: \"#cbc5c1\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 113\n          },\n          __self: this\n        }),\n        className: 'add_tab_button',\n        triggerId: \"add_tab_button\"\n      },\n      id: \"resource_pane_selection_modal\",\n      title: 'New Resource Pane',\n      content: React.createElement(\"div\", {\n        className: \"modal-body\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120\n        },\n        __self: this\n      }, \"Select a resource type\"), React.createElement(\"select\", {\n        className: \"form-control\",\n        id: \"resource_type\",\n        onChange: this.handlegetType,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121\n        },\n        __self: this\n      }, React.createElement(\"option\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122\n        },\n        __self: this\n      }, \"Text\"), React.createElement(\"option\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123\n        },\n        __self: this\n      }, \"none\"))),\n      footer: {\n        buttonNo: 2,\n        button1: {\n          className: \"btn btn-secondary\",\n          value: \"Close\"\n        },\n        button2: {\n          className: \"btn btn-primary\",\n          value: \"Add\"\n        }\n      }\n    };\n    return React.createElement(\"div\", {\n      className: \"resource-pane\",\n      id: \"resource-pane\",\n      style: {\n        display: this.props.showResourcePane ? \"block\" : \"none\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"resource_pane_tab_head\",\n      id: \"resource_pane_tab_head\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142\n      },\n      __self: this\n    }, React.createElement(Modal, {\n      modalProps: newResourceModal,\n      onClick: this.returnType,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143\n      },\n      __self: this\n    }), this.props.tabs.map((item, i) => {\n      const onSetActiveTab = () => this.props.setActiveTab(item.id);\n\n      let num = this.state.last;\n      return React.createElement(\"button\", {\n        key: item.id + '_btn',\n        onClick: onSetActiveTab,\n        className: this.props.current_tab === item.id ? \"tablinks active\" : \"tablinks\",\n        id: item.id + \"_btn\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 154\n        },\n        __self: this\n      }, num);\n    })), React.createElement(\"div\", {\n      className: \"tab_body\",\n      id: \"tab_body\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170\n      },\n      __self: this\n    }, this.props.tabs.map((item, i) => {\n      if (item.type === \"text\") {\n        this.myRef = React.createRef();\n        this.contentRef = React.createRef();\n        this.titleRef = React.createRef();\n\n        const handleRemove = () => this.props.remove_tab(i);\n\n        const clickLoad = () => {\n          this.myRef.current.click();\n        };\n\n        const handleFileUpload = () => {\n          var files = this.myRef.current.files;\n          this.props.fileManager('load', 'txt', item.tab_id, files);\n        };\n\n        const handlefileManager = () => {\n          this.props.fileManager('save', 'txt', item.tab_id);\n        };\n\n        const handleChange_title = e => {\n          var titleValue = this.titleRef.current.value;\n          this.props.change_title(item.tab_id, titleValue);\n        };\n\n        const handleChange_content = () => {\n          var contentValue = this.contentRef.current.value;\n          this.props.change_content(item.tab_id, contentValue);\n        };\n\n        return React.createElement(TabBody, {\n          id: item.id,\n          key: item.id + '_bdy',\n          i: i,\n          activeTab: this.state.activeTab,\n          handleremove: handleRemove,\n          fileManager: handlefileManager,\n          style: {\n            display: this.props.current_tab === item.id ? 'block' : 'none'\n          },\n          clickLoad: clickLoad,\n          titleValue: item.metadata.title,\n          contentValue: item.content,\n          handleFileUpload: handleFileUpload,\n          handleChange_title: handleChange_title,\n          handleChange_content: handleChange_content,\n          loadRef: this.myRef,\n          titleRef: this.titleRef,\n          contentRef: this.contentRef,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 206\n          },\n          __self: this\n        });\n      }\n    })));\n  }\n\n}\n\nclass TabBody extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      readOnly: false\n    };\n    this.toggle_edit_lock = this.toggle_edit_lock.bind(this);\n  }\n\n  toggle_edit_lock() {\n    this.setState({\n      readOnly: !this.state.readOnly\n    });\n  }\n\n  render() {\n    const _this$props = this.props,\n          tabs = _this$props.tabs,\n          id = _this$props.id,\n          i = _this$props.i,\n          activeTab = _this$props.activeTab,\n          handleremove = _this$props.handleremove,\n          handleLoad = _this$props.handleLoad,\n          fileManager = _this$props.fileManager,\n          style = _this$props.style,\n          loadTrigger = _this$props.loadTrigger,\n          ref = _this$props.ref,\n          clickLoad = _this$props.clickLoad,\n          contentValue = _this$props.contentValue,\n          loadRef = _this$props.loadRef,\n          titleRef = _this$props.titleRef,\n          contentRef = _this$props.contentRef,\n          handleFileUpload = _this$props.handleFileUpload,\n          handleChange_title = _this$props.handleChange_title,\n          handleChange_content = _this$props.handleChange_content;\n    return React.createElement(\"div\", {\n      id: id + \"_body\",\n      className: \"resource_pane_tab_content\",\n      style: style,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 288\n      },\n      __self: this\n    }, React.createElement(\"form\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 289\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 290\n      },\n      __self: this\n    }, React.createElement(Button, {\n      type: \"button\",\n      className: \"btn btn-default\",\n      title: \"Remove this tab from the resource pane\",\n      onClick: handleremove,\n      variant: \"light\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 292\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      className: \"fa fa-trash fa-fw fa-lg\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 299\n      },\n      __self: this\n    })), React.createElement(\"input\", {\n      type: \"file\",\n      id: \"load\" + id,\n      style: {\n        display: \"block\"\n      },\n      accept: \".txt\",\n      ref: loadRef,\n      onChange: handleFileUpload,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 301\n      },\n      __self: this\n    }), React.createElement(Button, {\n      type: \"button\",\n      id: \"load\" + id + \"_btn\",\n      className: \"btn btn-default\",\n      onClick: clickLoad,\n      title: \"Load a text file into this resource tab\",\n      variant: \"light\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 309\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      className: \"fa fa-upload fa-fw fa-lg\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 318\n      },\n      __self: this\n    })), React.createElement(Button, {\n      type: \"button\",\n      className: \"btn btn-default\",\n      onClick: fileManager\n      /*onclick=\"filemanager('save','txt','` + tab_id + `')\"*/\n      ,\n      title: \"Save this resource tab to a text file\",\n      variant: \"light\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 321\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      className: \"fa fa-download fa-fw fa-lg\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 329\n      },\n      __self: this\n    })), React.createElement(Button, {\n      id: \"toggle_edit_lock_button\",\n      type: \"button\",\n      className: \"btn btn-default\",\n      title: \"Toggle editability of the content area\",\n      onClick: this.toggle_edit_lock,\n      variant: \"light\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 331\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      id: \"toggle_edit_lock_icon_\" + id,\n      className: this.state.readOnly ? \"fa fa-lock fa-fw fa-lg\" : \"fa fa-unlock fa-fw fa-lg\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 338\n      },\n      __self: this\n    })), React.createElement(Button, {\n      type: \"button\",\n      className: \"btn btn-default\",\n      title: \"Add node from text selection\"\n      /* onclick=\"new_atom_txt_resource_button();\"*/\n      ,\n      variant: \"light\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 341\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      className: \"fa fa-puzzle-piece fa-fw fa-lg\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 348\n      },\n      __self: this\n    }))), React.createElement(\"div\", {\n      className: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 351\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 352\n      },\n      __self: this\n    }, \"Title\"), React.createElement(\"textarea\", {\n      id: \"title_\" + id,\n      type: \"text\",\n      rows: \"1\",\n      style: {\n        resize: \"none\"\n      },\n      className: \"form-control\",\n      placeholder: \"The name of this resource...\",\n      onChange: handleChange_title,\n      ref: titleRef,\n      value: this.props.titleValue,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 353\n      },\n      __self: this\n    }), React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 365\n      },\n      __self: this\n    }, \"Content\"), React.createElement(\"div\", {\n      id: \"textarea\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 366\n      },\n      __self: this\n    }, React.createElement(\"textarea\", {\n      id: id,\n      className: \"form-control\",\n      placeholder: \"Enter your source text here...\",\n      rows: \"20\",\n      ref: contentRef,\n      onChange: handleChange_content\n      /*onfocus=\"set_focus(this)\"*/\n      ,\n      style: {\n        resize: \"vertical\",\n        minHeight: \"35px\"\n      },\n      readOnly: this.state.readOnly,\n      value: contentValue,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 367\n      },\n      __self: this\n    })))));\n  }\n\n}\n\nexport default ResourcePane;","map":{"version":3,"sources":["/Users/gareth/Desktop/monkeypuzzle/src/Components/ResourcePane.js"],"names":["React","Component","FontAwesomeIcon","faPlusSquare","Modal","newResourceModal","Button","ResourcePane","constructor","props","state","activeTab","last_number","handlefileManager","bind","remove_all_tabs","handleAdd","returnType","handlegetType","next_number","increment_next","tabNumber","resource_type_idx","document","getElementById","options","selectedIndex","resource_type_txt","text","type","toLowerCase","getType","setState","addTab","console","log","searchTabs","tab","fileManager","componentDidMount","componentDidUpdate","prevProps","e","target","value","render","trigger","triggerText","className","triggerId","id","title","content","footer","buttonNo","button1","button2","display","showResourcePane","tabs","map","item","i","onSetActiveTab","setActiveTab","num","last","current_tab","myRef","createRef","contentRef","titleRef","handleRemove","remove_tab","clickLoad","current","click","handleFileUpload","files","tab_id","handleChange_title","titleValue","change_title","handleChange_content","contentValue","change_content","metadata","TabBody","readOnly","toggle_edit_lock","handleremove","handleLoad","style","loadTrigger","ref","loadRef","resize","minHeight"],"mappings":";AAAA,OAAOA,KAAP,IAAeC,SAAf,QAA+B,OAA/B;AACA,SAASC,eAAT,QAAgC,gCAAhC;AACA,SAASC,YAAT,QAA6B,mCAA7B,C,CACA;;AACA,OAAOC,KAAP,MAAkB,SAAlB;AACA,SAASC,gBAAT,QAAgC,iBAAhC;AAIA,OAAOC,MAAP,MAAmB,wBAAnB;;AAIA,MAAMC,YAAN,SAA2BN,SAA3B,CAAqC;AACjCO,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACf,UAAMA,KAAN;AACA,SAAKC,KAAL,GAAa;AACT;AACAC,MAAAA,SAAS,EAAE,CAFF;AAGTC,MAAAA,WAAW,EAAE;AAHJ,KAAb;AAMA,SAAKC,iBAAL,GAAwB,KAAKA,iBAAL,CAAuBC,IAAvB,CAA4B,IAA5B,CAAxB;AACA,SAAKC,eAAL,GAAuB,KAAKA,eAAL,CAAqBD,IAArB,CAA0B,IAA1B,CAAvB;AACA,SAAKE,SAAL,GAAiB,KAAKA,SAAL,CAAeF,IAAf,CAAoB,IAApB,CAAjB;AACA,SAAKG,UAAL,GAAiB,KAAKA,UAAL,CAAgBH,IAAhB,CAAqB,IAArB,CAAjB;AACA,SAAKI,aAAL,GAAqB,KAAKA,aAAL,CAAmBJ,IAAnB,CAAwB,IAAxB,CAArB;AACA,SAAKK,WAAL,GAAmB,KAAKA,WAAL,CAAiBL,IAAjB,CAAsB,IAAtB,CAAnB;AACA,SAAKM,cAAL,GAAsB,KAAKA,cAAL,CAAoBN,IAApB,CAAyB,IAAzB,CAAtB;AACJ,QAAIO,SAAS,GAAG,CAAhB;AAEC;;AACL;;;;;;;;;AASAJ,EAAAA,UAAU,GAAE;AACR,QAAIK,iBAAiB,GAAGC,QAAQ,CAACC,cAAT,CAAwB,eAAxB,EAAyCC,OAAzC,CAAiDC,aAAzE;AACA,QAAIC,iBAAiB,GAAGJ,QAAQ,CAACC,cAAT,CAAwB,eAAxB,EAAyCC,OAAzC,CAAiDH,iBAAjD,EAAoEM,IAA5F;AACA,QAAIC,IAAI,GAAGF,iBAAiB,CAACG,WAAlB,EAAX;AACA,SAAKrB,KAAL,CAAWsB,OAAX,CAAmBF,IAAnB;AAEH;;AAEDV,EAAAA,WAAW,GAAE;AACT,WAAOE,SAAS,EAAhB;AAEH;;AAEDD,EAAAA,cAAc,GAAE;AACZ,SAAKY,QAAL,CAAc;AAACpB,MAAAA,WAAW,EAAE,KAAKF,KAAL,CAAWE,WAAX,GAAyB;AAAvC,KAAd;AAEH;;AAEDI,EAAAA,SAAS,GAAE;AAGP,SAAKP,KAAL,CAAWwB,MAAX;AACDC,IAAAA,OAAO,CAACC,GAAR,CAAY,WAAZ;AACF;;AAEDC,EAAAA,UAAU,CAACC,GAAD,EAAK,CAEd;;AAEDtB,EAAAA,eAAe,GAAE;AACbmB,IAAAA,OAAO,CAACC,GAAR,CAAY,2BAAZ;AACH;;AAMDtB,EAAAA,iBAAiB,GAAE;AACf,SAAKJ,KAAL,CAAW6B,WAAX;AACH;;AACDC,EAAAA,iBAAiB,GAAE;AACf,SAAKP,QAAL,CAAc;AAACrB,MAAAA,SAAS,EAAE,KAAKF,KAAL,CAAWE;AAAvB,KAAd;AACAuB,IAAAA,OAAO,CAACC,GAAR,CAAY,KAAKzB,KAAL,CAAWC,SAAvB,EAAkC,aAAlC;AACH;;AAEG6B,EAAAA,kBAAkB,CAACC,SAAD,EAAY;AAChC;AACA,QAAI,KAAKhC,KAAL,CAAWM,eAAX,KAA+B0B,SAAS,CAAC1B,eAA7C,EAA8D;AAC5D,WAAKA,eAAL;AACD;AACF;;AAEDG,EAAAA,aAAa,CAACwB,CAAD,EAAG;AACZ,QAAIb,IAAI,GAAGa,CAAC,CAACC,MAAF,CAASC,KAApB;AACAV,IAAAA,OAAO,CAACC,GAAR,CAAYN,IAAZ,EAAiB,mBAAjB;AAEH;;AAKDgB,EAAAA,MAAM,GAAG;AAAA,UAEDlC,SAFC,GAKF,KAAKF,KALH,CAEDE,SAFC;AAQL,UAAMN,gBAAgB,GAAG;AAC3ByC,MAAAA,OAAO,EAAE;AACPC,QAAAA,WAAW,EAAE,oBAAC,eAAD;AAAiB,UAAA,IAAI,EAAE5C,YAAvB;AAAqC,UAAA,IAAI,EAAC,IAA1C;AAA+C,UAAA,KAAK,EAAC,SAArD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UADN;AAEP6C,QAAAA,SAAS,EAAE,gBAFJ;AAGPC,QAAAA,SAAS,EAAE;AAHJ,OADkB;AAM3BC,MAAAA,EAAE,EAAC,+BANwB;AAO3BC,MAAAA,KAAK,EAAE,mBAPoB;AAQ3BC,MAAAA,OAAO,EAAG;AAAK,QAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kCADU,EAEV;AAAQ,QAAA,SAAS,EAAC,cAAlB;AAAiC,QAAA,EAAE,EAAC,eAApC;AAAoD,QAAA,QAAQ,EAAE,KAAKlC,aAAnE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADA,EAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAFF,CAFU,CARiB;AAe3BmC,MAAAA,MAAM,EAAE;AACNC,QAAAA,QAAQ,EAAE,CADJ;AAENC,QAAAA,OAAO,EAAE;AACPP,UAAAA,SAAS,EAAE,mBADJ;AAEPJ,UAAAA,KAAK,EAAE;AAFA,SAFH;AAMNY,QAAAA,OAAO,EAAE;AACPR,UAAAA,SAAS,EAAE,iBADJ;AAEPJ,UAAAA,KAAK,EAAE;AAFA;AANH;AAfmB,KAAzB;AA6BA,WACI;AAAK,MAAA,SAAS,EAAC,eAAf;AAA+B,MAAA,EAAE,EAAC,eAAlC;AAAkD,MAAA,KAAK,EAAE;AAACa,QAAAA,OAAO,EAAE,KAAKhD,KAAL,CAAWiD,gBAAX,GAA8B,OAA9B,GAAwC;AAAlD,OAAzD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAK,MAAA,SAAS,EAAC,wBAAf;AAAwC,MAAA,EAAE,EAAC,wBAA3C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACY,oBAAC,KAAD;AACE,MAAA,UAAU,EAAIrD,gBADhB;AAEI,MAAA,OAAO,EAAI,KAAKY,UAFpB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADZ,EAOgB,KAAKR,KAAL,CAAWkD,IAAX,CAAgBC,GAAhB,CAAoB,CAACC,IAAD,EAAOC,CAAP,KAAY;AAC5B,YAAMC,cAAc,GAAG,MACnB,KAAKtD,KAAL,CAAWuD,YAAX,CAAwBH,IAAI,CAACX,EAA7B,CADJ;;AAEI,UAAIe,GAAG,GAAG,KAAKvD,KAAL,CAAWwD,IAArB;AACJ,aACI;AACI,QAAA,GAAG,EAAEL,IAAI,CAACX,EAAL,GAAU,MADnB;AAEI,QAAA,OAAO,EAAEa,cAFb;AAGI,QAAA,SAAS,EAAE,KAAKtD,KAAL,CAAW0D,WAAX,KAA2BN,IAAI,CAACX,EAAhC,GAAqC,iBAArC,GAAyD,UAHxE;AAII,QAAA,EAAE,EAAEW,IAAI,CAACX,EAAL,GAAQ,MAJhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAMKe,GANL,CADJ;AAWH,KAfD,CAPhB,CADJ,EA6BY;AAAK,MAAA,SAAS,EAAC,UAAf;AAA0B,MAAA,EAAE,EAAC,UAA7B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACK,KAAKxD,KAAL,CAAWkD,IAAX,CAAgBC,GAAhB,CAAoB,CAACC,IAAD,EAAMC,CAAN,KAAY;AAC7B,UAAGD,IAAI,CAAChC,IAAL,KAAc,MAAjB,EAAwB;AACxB,aAAKuC,KAAL,GAAapE,KAAK,CAACqE,SAAN,EAAb;AACA,aAAKC,UAAL,GAAkBtE,KAAK,CAACqE,SAAN,EAAlB;AACA,aAAKE,QAAL,GAAgBvE,KAAK,CAACqE,SAAN,EAAhB;;AAEA,cAAMG,YAAY,GAAG,MACjB,KAAK/D,KAAL,CAAWgE,UAAX,CAAsBX,CAAtB,CADJ;;AAGA,cAAMY,SAAS,GAAE,MAAM;AAEnB,eAAKN,KAAL,CAAWO,OAAX,CAAmBC,KAAnB;AAEH,SAJD;;AAMA,cAAMC,gBAAgB,GAAG,MAAK;AAC9B,cAAIC,KAAK,GAAG,KAAKV,KAAL,CAAWO,OAAX,CAAmBG,KAA/B;AACA,eAAKrE,KAAL,CAAW6B,WAAX,CAAuB,MAAvB,EAA8B,KAA9B,EAAsCuB,IAAI,CAACkB,MAA3C,EAAmDD,KAAnD;AAEC,SAJD;;AAKA,cAAMjE,iBAAiB,GAAG,MAAK;AAE3B,eAAKJ,KAAL,CAAW6B,WAAX,CAAuB,MAAvB,EAA+B,KAA/B,EAAsCuB,IAAI,CAACkB,MAA3C;AACH,SAHD;;AAIA,cAAMC,kBAAkB,GAAItC,CAAD,IAAM;AAC7B,cAAIuC,UAAU,GAAG,KAAKV,QAAL,CAAcI,OAAd,CAAsB/B,KAAvC;AACA,eAAKnC,KAAL,CAAWyE,YAAX,CAAwBrB,IAAI,CAACkB,MAA7B,EAAqCE,UAArC;AACH,SAHD;;AAKA,cAAME,oBAAoB,GAAG,MAAK;AAC9B,cAAIC,YAAY,GAAG,KAAKd,UAAL,CAAgBK,OAAhB,CAAwB/B,KAA3C;AACA,eAAKnC,KAAL,CAAW4E,cAAX,CAA0BxB,IAAI,CAACkB,MAA/B,EAAuCK,YAAvC;AACH,SAHD;;AAKA,eACI,oBAAC,OAAD;AACI,UAAA,EAAE,EAAEvB,IAAI,CAACX,EADb;AAEI,UAAA,GAAG,EAAEW,IAAI,CAACX,EAAL,GAAU,MAFnB;AAGI,UAAA,CAAC,EAAEY,CAHP;AAII,UAAA,SAAS,EAAE,KAAKpD,KAAL,CAAWC,SAJ1B;AAKI,UAAA,YAAY,EAAE6D,YALlB;AAMI,UAAA,WAAW,EAAE3D,iBANjB;AAOI,UAAA,KAAK,EAAE;AAAC4C,YAAAA,OAAO,EAAE,KAAKhD,KAAL,CAAW0D,WAAX,KAA2BN,IAAI,CAACX,EAAhC,GAAqC,OAArC,GAA+C;AAAzD,WAPX;AAQI,UAAA,SAAS,EAAEwB,SARf;AASI,UAAA,UAAU,EAAEb,IAAI,CAACyB,QAAL,CAAcnC,KAT9B;AAUI,UAAA,YAAY,EAAIU,IAAI,CAACT,OAVzB;AAYI,UAAA,gBAAgB,EAAEyB,gBAZtB;AAaI,UAAA,kBAAkB,EAAEG,kBAbxB;AAcI,UAAA,oBAAoB,EAAEG,oBAd1B;AAgBI,UAAA,OAAO,EAAE,KAAKf,KAhBlB;AAiBI,UAAA,QAAQ,EAAE,KAAKG,QAjBnB;AAkBI,UAAA,UAAU,EAAE,KAAKD,UAlBrB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UADJ;AAsBH;AACA,KAzDA,CADL,CA7BZ,CADJ;AA6FH;;AA3NoC;;AAmOrC,MAAMiB,OAAN,SAAsBvF,KAAK,CAACC,SAA5B,CAAsC;AAClCO,EAAAA,WAAW,CAACC,KAAD,EAAO;AACd,UAAMA,KAAN;AACA,SAAKC,KAAL,GAAa;AACT8E,MAAAA,QAAQ,EAAE;AADD,KAAb;AAGA,SAAKC,gBAAL,GAAwB,KAAKA,gBAAL,CAAsB3E,IAAtB,CAA2B,IAA3B,CAAxB;AAEH;;AAED2E,EAAAA,gBAAgB,GAAE;AACd,SAAKzD,QAAL,CAAc;AAACwD,MAAAA,QAAQ,EAAE,CAAC,KAAK9E,KAAL,CAAW8E;AAAvB,KAAd;AAEH;;AAID3C,EAAAA,MAAM,GAAG;AAAA,wBAyBX,KAAKpC,KAzBM;AAAA,UAEHkD,IAFG,eAEHA,IAFG;AAAA,UAGHT,EAHG,eAGHA,EAHG;AAAA,UAIHY,CAJG,eAIHA,CAJG;AAAA,UAKHnD,SALG,eAKHA,SALG;AAAA,UAMH+E,YANG,eAMHA,YANG;AAAA,UAOHC,UAPG,eAOHA,UAPG;AAAA,UAQHrD,WARG,eAQHA,WARG;AAAA,UASHsD,KATG,eASHA,KATG;AAAA,UAUHC,WAVG,eAUHA,WAVG;AAAA,UAWHC,GAXG,eAWHA,GAXG;AAAA,UAYHpB,SAZG,eAYHA,SAZG;AAAA,UAaHU,YAbG,eAaHA,YAbG;AAAA,UAebW,OAfa,eAebA,OAfa;AAAA,UAgBbxB,QAhBa,eAgBbA,QAhBa;AAAA,UAiBbD,UAjBa,eAiBbA,UAjBa;AAAA,UAmBbO,gBAnBa,eAmBbA,gBAnBa;AAAA,UAoBbG,kBApBa,eAoBbA,kBApBa;AAAA,UAqBbG,oBArBa,eAqBbA,oBArBa;AA6Bb,WACI;AAAK,MAAA,EAAE,EAAEjC,EAAE,GAAC,OAAZ;AAAqB,MAAA,SAAS,EAAC,2BAA/B;AAA2D,MAAA,KAAK,EAAE0C,KAAlE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACA;AAAK,MAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAEA,oBAAC,MAAD;AACA,MAAA,IAAI,EAAC,QADL;AAEA,MAAA,SAAS,EAAC,iBAFV;AAGA,MAAA,KAAK,EAAC,wCAHN;AAIA,MAAA,OAAO,EAAEF,YAJT;AAKA,MAAA,OAAO,EAAC,OALR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAOA;AAAG,MAAA,SAAS,EAAC,yBAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAPA,CAFA,EAWA;AACA,MAAA,IAAI,EAAC,MADL;AAEA,MAAA,EAAE,EAAE,SAASxC,EAFb;AAGA,MAAA,KAAK,EAAE;AAACO,QAAAA,OAAO,EAAE;AAAV,OAHP;AAIA,MAAA,MAAM,EAAC,MAJP;AAKA,MAAA,GAAG,EAAEsC,OALL;AAMA,MAAA,QAAQ,EAAGlB,gBANX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAXA,EAmBA,oBAAC,MAAD;AACA,MAAA,IAAI,EAAC,QADL;AAEA,MAAA,EAAE,EAAE,SAAS3B,EAAT,GAAc,MAFlB;AAGA,MAAA,SAAS,EAAC,iBAHV;AAIA,MAAA,OAAO,EAAEwB,SAJT;AAMA,MAAA,KAAK,EAAC,yCANN;AAOA,MAAA,OAAO,EAAC,OAPR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OASA;AAAG,MAAA,SAAS,EAAC,0BAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MATA,CAnBA,EA+BA,oBAAC,MAAD;AACA,MAAA,IAAI,EAAC,QADL;AAEA,MAAA,SAAS,EAAC,iBAFV;AAGA,MAAA,OAAO,EAAEpC;AACT;AAJA;AAKA,MAAA,KAAK,EAAC,uCALN;AAMA,MAAA,OAAO,EAAC,OANR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAQA;AAAG,MAAA,SAAS,EAAC,4BAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MARA,CA/BA,EAyCA,oBAAC,MAAD;AAAQ,MAAA,EAAE,EAAC,yBAAX;AACA,MAAA,IAAI,EAAC,QADL;AAEA,MAAA,SAAS,EAAC,iBAFV;AAGA,MAAA,KAAK,EAAC,wCAHN;AAIA,MAAA,OAAO,EAAE,KAAKmD,gBAJd;AAKA,MAAA,OAAO,EAAC,OALR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAOA;AAAG,MAAA,EAAE,EAAE,2BAA2BvC,EAAlC;AACA,MAAA,SAAS,EAAG,KAAKxC,KAAL,CAAW8E,QAAZ,GAAwB,wBAAxB,GAAmD,0BAD9D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAPA,CAzCA,EAmDA,oBAAC,MAAD;AACA,MAAA,IAAI,EAAC,QADL;AAEA,MAAA,SAAS,EAAC,iBAFV;AAGA,MAAA,KAAK,EAAC;AACN;AAJA;AAKA,MAAA,OAAO,EAAC,OALR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAOA;AAAG,MAAA,SAAS,EAAC,gCAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAPA,CAnDA,CADA,EA8DA;AAAK,MAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eADJ,EAEI;AACI,MAAA,EAAE,EAAE,WAAStC,EADjB;AAEI,MAAA,IAAI,EAAC,MAFT;AAGI,MAAA,IAAI,EAAC,GAHT;AAII,MAAA,KAAK,EAAE;AAAC8C,QAAAA,MAAM,EAAE;AAAT,OAJX;AAKI,MAAA,SAAS,EAAC,cALd;AAMI,MAAA,WAAW,EAAC,8BANhB;AAOI,MAAA,QAAQ,EAAEhB,kBAPd;AAQI,MAAA,GAAG,EAAET,QART;AASI,MAAA,KAAK,EAAE,KAAK9D,KAAL,CAAWwE,UATtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFJ,EAcA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBAdA,EAeA;AAAK,MAAA,EAAE,EAAC,UAAR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACA;AACA,MAAA,EAAE,EAAE/B,EADJ;AAEA,MAAA,SAAS,EAAC,cAFV;AAGA,MAAA,WAAW,EAAC,gCAHZ;AAIA,MAAA,IAAI,EAAC,IAJL;AAKA,MAAA,GAAG,EAAEoB,UALL;AAMA,MAAA,QAAQ,EAAEa;AACV;AAPA;AAQA,MAAA,KAAK,EAAE;AAACa,QAAAA,MAAM,EAAE,UAAT;AAAqBC,QAAAA,SAAS,EAAE;AAAhC,OARP;AASA,MAAA,QAAQ,EAAE,KAAKvF,KAAL,CAAW8E,QATrB;AAUA,MAAA,KAAK,EAAGJ,YAVR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADA,CAfA,CA9DA,CADA,CADJ;AAkGC;;AAhJqC;;AA0JtC,eAAe7E,YAAf","sourcesContent":["import React, {Component} from 'react';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faPlusSquare } from '@fortawesome/free-solid-svg-icons';\n//Import Components\nimport Modal from './Modal';\nimport { newResourceModal} from './ModalData.jsx';\n\n\n\nimport Button from 'react-bootstrap/Button';\n\n\n\nclass ResourcePane extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            //tabs: this.props.tabs,\n            activeTab: 1,\n            last_number: 0,\n\n        }\n        this.handlefileManager =this.handlefileManager.bind(this);\n        this.remove_all_tabs = this.remove_all_tabs.bind(this);\n        this.handleAdd = this.handleAdd.bind(this);\n        this.returnType =this.returnType.bind(this);\n        this.handlegetType = this.handlegetType.bind(this);\n        this.next_number = this.next_number.bind(this);\n        this.increment_next = this.increment_next.bind(this);\n    var tabNumber = 0;\n\n    };\n/*\n    setActiveTab(value){\n        this.setState({\n            activeTab: value\n        }, function (){\n            console.log(this.state.activeTab, 'active');\n        });\n    }\n*/\nreturnType(){\n    var resource_type_idx = document.getElementById(\"resource_type\").options.selectedIndex;\n    var resource_type_txt = document.getElementById(\"resource_type\").options[resource_type_idx].text;\n    let type = resource_type_txt.toLowerCase()\n    this.props.getType(type);\n\n}\n\nnext_number(){\n    return tabNumber++;\n     \n}\n\nincrement_next(){\n    this.setState({last_number: this.state.last_number + 1});\n\n}\n\nhandleAdd(){\n    \n    \n    this.props.addTab();\n   console.log(\"handleADD\");\n}\n\nsearchTabs(tab){\n\n}\n\nremove_all_tabs(){\n    console.log(\"remove tabs resource pane\")\n}\n\n\n\n\n\nhandlefileManager(){\n    this.props.fileManager()\n}\ncomponentDidMount(){\n    this.setState({activeTab: this.props.activeTab})\n    console.log(this.state.activeTab, 'active tabs');\n}\n\n    componentDidUpdate(prevProps) {\n  // Typical usage (don't forget to compare props):\n  if (this.props.remove_all_tabs !== prevProps.remove_all_tabs) {\n    this.remove_all_tabs();\n  }\n}\n\nhandlegetType(e){\n    let type = e.target.value;\n    console.log(type,'resourcePane type');\n\n}\n\n\n\n\nrender() {\n    const{\n        activeTab\n\n\n    } =this.props;\n\n\n    const newResourceModal = {\n  trigger: {\n    triggerText: <FontAwesomeIcon icon={faPlusSquare} size=\"lg\" color=\"#cbc5c1\"/>,\n    className: 'add_tab_button',\n    triggerId: \"add_tab_button\",\n  },\n  id:\"resource_pane_selection_modal\",\n  title: 'New Resource Pane',\n  content:  <div className=\"modal-body\">\n  <p>Select a resource type</p>\n  <select className=\"form-control\" id=\"resource_type\" onChange={this.handlegetType}>\n  <option>Text</option>\n    <option>none</option>\n  </select>\n  </div>,\n  footer: {\n    buttonNo: 2,\n    button1: {\n      className: \"btn btn-secondary\",\n      value: \"Close\"\n    },\n    button2: {\n      className: \"btn btn-primary\",\n      value: \"Add\"\n    }\n  }\n};\n\n\n    return ( \n        <div className=\"resource-pane\" id=\"resource-pane\" style={{display: this.props.showResourcePane ? \"block\" : \"none\"}}> \n            <div className=\"resource_pane_tab_head\" id=\"resource_pane_tab_head\">\n                        <Modal\n                          modalProps = {newResourceModal}  \n                            onClick = {this.returnType} \n                         />\n                    \n                        {\n                            this.props.tabs.map((item, i)=> {\n                                const onSetActiveTab = () =>\n                                    this.props.setActiveTab(item.id);\n                                    let num = this.state.last;\n                                return(\n                                    <button  \n                                        key={item.id + '_btn'}\n                                        onClick={onSetActiveTab} \n                                        className={this.props.current_tab === item.id ? \"tablinks active\" : \"tablinks\"}\n                                        id={item.id+\"_btn\"}\n                                    >\n                                        {num}\n                                    </button>\n                                    \n                                );\n                            })\n                        }\n                    </div>\n\n\n                        \n                    <div className=\"tab_body\" id=\"tab_body\">\n                        {this.props.tabs.map((item,i) => {\n                            if(item.type === \"text\"){\n                            this.myRef = React.createRef();\n                            this.contentRef = React.createRef();\n                            this.titleRef = React.createRef();\n\n                            const handleRemove = () =>\n                                this.props.remove_tab(i);\n\n                            const clickLoad =() => {\n                                \n                                this.myRef.current.click();\n\n                            }\n\n                            const handleFileUpload = () =>{\n                            var files = this.myRef.current.files;\n                            this.props.fileManager('load','txt',  item.tab_id ,files);\n\n                            }\n                            const handlefileManager = () =>{\n\n                                this.props.fileManager('save', 'txt', item.tab_id); \n                            }\n                            const handleChange_title = (e) =>{\n                                var titleValue = this.titleRef.current.value;\n                                this.props.change_title(item.tab_id, titleValue);\n                            }\n\n                            const handleChange_content = () =>{\n                                var contentValue = this.contentRef.current.value;\n                                this.props.change_content(item.tab_id, contentValue);\n                            }\n\n                            return(\n                                <TabBody\n                                    id={item.id}\n                                    key={item.id + '_bdy'}\n                                    i={i}\n                                    activeTab={this.state.activeTab}\n                                    handleremove={handleRemove}\n                                    fileManager={handlefileManager}\n                                    style={{display: this.props.current_tab === item.id ? 'block' : 'none'}}\n                                    clickLoad={clickLoad}\n                                    titleValue={item.metadata.title}\n                                    contentValue = {item.content}\n                                   \n                                    handleFileUpload={handleFileUpload}\n                                    handleChange_title={handleChange_title}\n                                    handleChange_content={handleChange_content}\n\n                                    loadRef={this.myRef}\n                                    titleRef={this.titleRef}\n                                    contentRef={this.contentRef}\n                                />\n                            )\n                        }\n                        })}\n                    </div>\n                    </div>\n                    );\n\n}\n}\n\n\n\n\n\n\nclass TabBody extends React.Component {\n    constructor(props){\n        super(props);\n        this.state = {\n            readOnly: false,\n        }\n        this.toggle_edit_lock = this.toggle_edit_lock.bind(this);\n\n    }\n\n    toggle_edit_lock(){\n        this.setState({readOnly: !this.state.readOnly})\n\n    }\n\n\n\n    render() { \n        const {\n          tabs,\n          id,\n          i,\n          activeTab,\n          handleremove,\n          handleLoad,\n          fileManager,\n          style,\n          loadTrigger,\n          ref,\n          clickLoad,\n          contentValue,\n//element references\nloadRef,\ntitleRef,\ncontentRef,\n\nhandleFileUpload,\nhandleChange_title,\nhandleChange_content\n\n\n\n}=this.props\n\n\n\nreturn (\n    <div id={id+\"_body\"} className=\"resource_pane_tab_content\" style={style}>\n    <form>\n    <div className=\"form-group\">\n\n    <Button \n    type=\"button\" \n    className=\"btn btn-default\" \n    title=\"Remove this tab from the resource pane\"\n    onClick={handleremove}\n    variant=\"light\"\n    >\n    <i className=\"fa fa-trash fa-fw fa-lg\"></i>\n    </Button>\n    <input \n    type=\"file\" \n    id={\"load\" + id} \n    style={{display: \"block\"}} \n    accept=\".txt\" \n    ref={loadRef}\n    onChange= {handleFileUpload}\n    />\n    <Button \n    type=\"button\" \n    id={\"load\" + id + \"_btn\"} \n    className=\"btn btn-default\" \n    onClick={clickLoad}\n\n    title=\"Load a text file into this resource tab\"\n    variant=\"light\"\n    >\n    <i className=\"fa fa-upload fa-fw fa-lg\"></i>\n\n    </Button>\n    <Button \n    type=\"button\" \n    className=\"btn btn-default\" \n    onClick={fileManager}\n    /*onclick=\"filemanager('save','txt','` + tab_id + `')\"*/ \n    title=\"Save this resource tab to a text file\"\n    variant=\"light\"\n    >\n    <i className=\"fa fa-download fa-fw fa-lg\"></i>\n    </Button>\n    <Button id=\"toggle_edit_lock_button\" \n    type=\"button\" \n    className=\"btn btn-default\" \n    title=\"Toggle editability of the content area\" \n    onClick={this.toggle_edit_lock}\n    variant=\"light\"\n    >\n    <i id={\"toggle_edit_lock_icon_\" + id} \n    className={(this.state.readOnly) ? \"fa fa-lock fa-fw fa-lg\" : \"fa fa-unlock fa-fw fa-lg\"}></i>\n    </Button>\n    <Button \n    type=\"button\" \n    className=\"btn btn-default\" \n    title=\"Add node from text selection\"\n    /* onclick=\"new_atom_txt_resource_button();\"*/\n    variant=\"light\"\n    >\n    <i className=\"fa fa-puzzle-piece fa-fw fa-lg\"></i>\n    </Button>\n    </div>\n    <div className=\"form-group\">\n        <label>Title</label>\n        <textarea \n            id={\"title_\"+id} \n            type=\"text\" \n            rows=\"1\" \n            style={{resize: \"none\"}} \n            className=\"form-control\" \n            placeholder=\"The name of this resource...\" \n            onChange={handleChange_title}\n            ref={titleRef}\n            value={this.props.titleValue}\n            >\n        </textarea> \n    <label>Content</label>\n    <div id=\"textarea\">\n    <textarea \n    id={id} \n    className=\"form-control\" \n    placeholder=\"Enter your source text here...\" \n    rows=\"20\" \n    ref={contentRef}\n    onChange={handleChange_content} \n    /*onfocus=\"set_focus(this)\"*/ \n    style={{resize: \"vertical\", minHeight: \"35px\"}} \n    readOnly={this.state.readOnly}\n    value= {contentValue}>\n\n    </textarea>\n    </div>  \n    </div> \n    </form>\n    </div>\n    );\n}\n\n\n}   \n\n\n\n\n\n\nexport default ResourcePane;\n"]},"metadata":{},"sourceType":"module"}